import{d as Mt,R as V,r as T,h as ya,j as I,b as Ae,f as Ru,S as Mu,c as Oa}from"./axios.js";var yr=Lu,Nu=/^(?:\w+:)?\/\/(\S+)$/,ju=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,Iu=/^[^\s\.]+\.\S{2,}$/;function Lu(e){if(typeof e!="string")return!1;var t=e.match(Nu);if(!t)return!1;var r=t[1];return r?!!(ju.test(r)||Iu.test(r)):!1}var _e={};Object.defineProperty(_e,"__esModule",{value:!0});var Wu=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),cr={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},_u={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Wu?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},xa={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Nt=1;Nt<20;Nt++)xa["f"+Nt]=111+Nt;function ar(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map(function(i){return ka(i,t)}),a=function(o){return n.some(function(l){return Sa(l,o)})},u=r==null?a:a(r);return u}function $u(e,t){return ar(e,t)}function zu(e,t){return ar(e,{byKey:!0},t)}function ka(e,t){var r=t&&t.byKey,n={};e=e.replace("++","+add");var a=e.split("+"),u=a.length;for(var i in cr)n[cr[i]]=!1;var o=!0,l=!1,f=void 0;try{for(var d=a[Symbol.iterator](),D;!(o=(D=d.next()).done);o=!0){var v=D.value,g=v.endsWith("?")&&v.length>1;g&&(v=v.slice(0,-1));var p=Vr(v),B=cr[p];(u===1||!B)&&(r?n.key=p:n.which=Pa(v)),B&&(n[B]=g?null:!0)}}catch(C){l=!0,f=C}finally{try{!o&&d.return&&d.return()}finally{if(l)throw f}}return n}function Sa(e,t){for(var r in e){var n=e[r],a=void 0;if(n!=null&&(r==="key"&&t.key!=null?a=t.key.toLowerCase():r==="which"?a=n===91&&t.which===93?91:t.which:a=t[r],!(a==null&&n===!1)&&a!==n))return!1}return!0}function Pa(e){e=Vr(e);var t=xa[e]||e.toUpperCase().charCodeAt(0);return t}function Vr(e){return e=e.toLowerCase(),e=_u[e]||e,e}var qu=_e.default=ar;_e.isHotkey=ar;_e.isCodeHotkey=$u;var dr=_e.isKeyHotkey=zu;_e.parseHotkey=ka;_e.compareHotkey=Sa;_e.toKeyCode=Pa;_e.toKeyName=Vr;/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var Hu=/["'&<>]/,vr=Vu;function Vu(e){var t=""+e,r=Hu.exec(t);if(!r)return t;var n,a="",u=0,i=0;for(u=r.index;u<t.length;u++){switch(t.charCodeAt(u)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==u&&(a+=t.substring(i,u)),i=u+1,a+=n}return i!==u?a+t.substring(i,u):a}const Ku=["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga"];/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function dn(e){return Object.prototype.toString.call(e)==="[object Object]"}function De(e){var t,r;return dn(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(dn(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function Pe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function at(e){return!!e&&!!e[be]}function ut(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===ei}(e)||Array.isArray(e)||!!e[Bn]||!!(!((t=e.constructor)===null||t===void 0)&&t[Bn])||Kr(e)||Ur(e))}function yt(e,t,r){r===void 0&&(r=!1),ht(e)===0?(r?Object.keys:Jr)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function ht(e){var t=e[be];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Kr(e)?2:Ur(e)?3:0}function Or(e,t){return ht(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Uu(e,t){return ht(e)===2?e.get(t):e[t]}function Ta(e,t,r){var n=ht(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Gu(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Kr(e){return Ju&&e instanceof Map}function Ur(e){return Qu&&e instanceof Set}function Je(e){return e.o||e.t}function Gr(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ti(e);delete t[be];for(var r=Jr(t),n=0;n<r.length;n++){var a=r[n],u=t[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(t[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Yr(e,t){return t===void 0&&(t=!1),Xr(e)||at(e)||!ut(e)||(ht(e)>1&&(e.set=e.add=e.clear=e.delete=Yu),Object.freeze(e),t&&yt(e,function(r,n){return Yr(n,!0)},!0)),e}function Yu(){Pe(2)}function Xr(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Me(e){var t=ri[e];return t||Pe(18,e),t}function vn(){return Ot}function Dr(e,t){t&&(Me("Patches"),e.u=[],e.s=[],e.v=t)}function Xt(e){xr(e),e.p.forEach(Xu),e.p=null}function xr(e){e===Ot&&(Ot=e.l)}function Dn(e){return Ot={p:[],l:Ot,h:e,m:!0,_:0}}function Xu(e){var t=e[be];t.i===0||t.i===1?t.j():t.O=!0}function hr(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Me("ES5").S(t,e,n),n?(r[be].P&&(Xt(t),Pe(4)),ut(e)&&(e=Zt(t,e),t.l||Jt(t,e)),t.u&&Me("Patches").M(r[be].t,e,t.u,t.s)):e=Zt(t,r,[]),Xt(t),t.u&&t.v(t.u,t.s),e!==Ra?e:void 0}function Zt(e,t,r){if(Xr(t))return t;var n=t[be];if(!n)return yt(t,function(o,l){return hn(e,n,t,o,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Jt(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Gr(n.k):n.o,u=a,i=!1;n.i===3&&(u=new Set(a),a.clear(),i=!0),yt(u,function(o,l){return hn(e,n,a,o,l,r,i)}),Jt(e,a,!1),r&&e.u&&Me("Patches").N(n,r,e.u,e.s)}return n.o}function hn(e,t,r,n,a,u,i){if(at(a)){var o=Zt(e,a,u&&t&&t.i!==3&&!Or(t.R,n)?u.concat(n):void 0);if(Ta(r,n,o),!at(o))return;e.m=!1}else i&&r.add(a);if(ut(a)&&!Xr(a)){if(!e.h.D&&e._<1)return;Zt(e,a),t&&t.A.l||Jt(e,a)}}function Jt(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Yr(t,r)}function gr(e,t){var r=e[be];return(r?Je(r):e)[t]}function gn(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function kr(e){e.P||(e.P=!0,e.l&&kr(e.l))}function Cr(e){e.o||(e.o=Gr(e.t))}function Sr(e,t,r){var n=Kr(t)?Me("MapSet").F(t,r):Ur(t)?Me("MapSet").T(t,r):e.g?function(a,u){var i=Array.isArray(a),o={i:i?1:0,A:u?u.A:vn(),P:!1,I:!1,R:{},l:u,t:a,k:null,o:null,j:null,C:!1},l=o,f=Pr;i&&(l=[o],f=Et);var d=Proxy.revocable(l,f),D=d.revoke,v=d.proxy;return o.k=v,o.j=D,v}(t,r):Me("ES5").J(t,r);return(r?r.A:vn()).p.push(n),n}function Zu(e){return at(e)||Pe(22,e),function t(r){if(!ut(r))return r;var n,a=r[be],u=ht(r);if(a){if(!a.P&&(a.i<4||!Me("ES5").K(a)))return a.t;a.I=!0,n=Cn(r,u),a.I=!1}else n=Cn(r,u);return yt(n,function(i,o){a&&Uu(a.t,i)===o||Ta(n,i,t(o))}),u===3?new Set(n):n}(e)}function Cn(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Gr(e)}var pn,Ot,Zr=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ju=typeof Map<"u",Qu=typeof Set<"u",mn=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ra=Zr?Symbol.for("immer-nothing"):((pn={})["immer-nothing"]=!0,pn),Bn=Zr?Symbol.for("immer-draftable"):"__$immer_draftable",be=Zr?Symbol.for("immer-state"):"__$immer_state",ei=""+Object.prototype.constructor,Jr=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ti=Object.getOwnPropertyDescriptors||function(e){var t={};return Jr(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},ri={},Pr={get:function(e,t){if(t===be)return e;var r=Je(e);if(!Or(r,t))return function(a,u,i){var o,l=gn(u,i);return l?"value"in l?l.value:(o=l.get)===null||o===void 0?void 0:o.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!ut(n)?n:n===gr(e.t,t)?(Cr(e),e.o[t]=Sr(e.A.h,n,e)):n},has:function(e,t){return t in Je(e)},ownKeys:function(e){return Reflect.ownKeys(Je(e))},set:function(e,t,r){var n=gn(Je(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=gr(Je(e),t),u=a==null?void 0:a[be];if(u&&u.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Gu(r,a)&&(r!==void 0||Or(e.t,t)))return!0;Cr(e),kr(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return gr(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Cr(e),kr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Je(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Pe(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Pe(12)}},Et={};yt(Pr,function(e,t){Et[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Et.deleteProperty=function(e,t){return Et.set.call(this,e,t,void 0)},Et.set=function(e,t,r){return Pr.set.call(this,e[0],t,r,e[0])};var ni=function(){function e(r){var n=this;this.g=mn,this.D=!0,this.produce=function(a,u,i){if(typeof a=="function"&&typeof u!="function"){var o=u;u=a;var l=n;return function(B){var C=this;B===void 0&&(B=o);for(var c=arguments.length,O=Array(c>1?c-1:0),S=1;S<c;S++)O[S-1]=arguments[S];return l.produce(B,function(R){var $;return($=u).call.apply($,[C,R].concat(O))})}}var f;if(typeof u!="function"&&Pe(6),i!==void 0&&typeof i!="function"&&Pe(7),ut(a)){var d=Dn(n),D=Sr(n,a,void 0),v=!0;try{f=u(D),v=!1}finally{v?Xt(d):xr(d)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(B){return Dr(d,i),hr(B,d)},function(B){throw Xt(d),B}):(Dr(d,i),hr(f,d))}if(!a||typeof a!="object"){if((f=u(a))===void 0&&(f=a),f===Ra&&(f=void 0),n.D&&Yr(f,!0),i){var g=[],p=[];Me("Patches").M(a,f,g,p),i(g,p)}return f}Pe(21,a)},this.produceWithPatches=function(a,u){if(typeof a=="function")return function(f){for(var d=arguments.length,D=Array(d>1?d-1:0),v=1;v<d;v++)D[v-1]=arguments[v];return n.produceWithPatches(f,function(g){return a.apply(void 0,[g].concat(D))})};var i,o,l=n.produce(a,u,function(f,d){i=f,o=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(f){return[f,i,o]}):[l,i,o]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){ut(r)||Pe(8),at(r)&&(r=Zu(r));var n=Dn(this),a=Sr(this,r,void 0);return a[be].C=!0,xr(n),a},t.finishDraft=function(r,n){var a=r&&r[be],u=a.A;return Dr(u,n),hr(void 0,u)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!mn&&Pe(20),this.g=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var u=n[a];if(u.path.length===0&&u.op==="replace"){r=u.value;break}}a>-1&&(n=n.slice(a+1));var i=Me("Patches").$;return at(r)?i(r,n):this.produce(r,function(o){return i(o,n)})},e}(),we=new ni,Qr=we.produce;we.produceWithPatches.bind(we);we.setAutoFreeze.bind(we);we.setUseProxies.bind(we);we.applyPatches.bind(we);var En=we.createDraft.bind(we),An=we.finishDraft.bind(we);function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qt=new WeakMap,er=new WeakMap,Ct=new WeakMap,Fn=new WeakMap,bn=new WeakMap,wn=new WeakMap,yn=new WeakMap;function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?On(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ma=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:t=>{for(var r of s.pathRefs(e))Ri.transform(r,t);for(var n of s.pointRefs(e))Mi.transform(n,t);for(var a of s.rangeRefs(e))Ii.transform(a,t);var u=Qt.get(e)||[],i=er.get(e)||new Set,o,l,f=p=>{if(p){var B=p.join(",");l.has(B)||(l.add(B),o.push(p))}};if(h.operationCanTransformPath(t)){o=[],l=new Set;for(var d of u){var D=h.transform(d,t);f(D)}}else o=u,l=i;var v=e.getDirtyPaths(t);for(var g of v)f(g);Qt.set(e,o),er.set(e,l),F.transform(e,t),e.operations.push(t),s.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),Ct.get(e)||(Ct.set(e,!0),Promise.resolve().then(()=>{Ct.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},addMark:(t,r)=>{var{selection:n,markableVoid:a}=e;if(n){var u=(v,g)=>{if(!j.isText(v))return!1;var[p,B]=s.parent(e,g);return!e.isVoid(p)||e.markableVoid(p)},i=E.isExpanded(n),o=!1;if(!i){var[l,f]=s.node(e,n);if(l&&u(l,f)){var[d]=s.parent(e,f);o=d&&e.markableVoid(d)}}if(i||o)F.setNodes(e,{[t]:r},{match:u,split:!0,voids:!0});else{var D=jt(jt({},s.marks(e)||{}),{},{[t]:r});e.marks=D,Ct.get(e)||e.onChange()}}},deleteBackward:t=>{var{selection:r}=e;r&&E.isCollapsed(r)&&F.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:r}=e;r&&E.isCollapsed(r)&&F.delete(e,{unit:t})},deleteFragment:t=>{var{selection:r}=e;r&&E.isExpanded(r)&&F.delete(e,{reverse:t==="backward"})},getFragment:()=>{var{selection:t}=e;return t?x.fragment(e,t):[]},insertBreak:()=>{F.splitNodes(e,{always:!0})},insertSoftBreak:()=>{F.splitNodes(e,{always:!0})},insertFragment:t=>{F.insertFragment(e,t)},insertNode:t=>{F.insertNodes(e,t)},insertText:t=>{var{selection:r,marks:n}=e;if(r){if(n){var a=jt({text:t},n);F.insertNodes(e,a)}else F.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[r,n]=t;if(!j.isText(r)){if(L.isElement(r)&&r.children.length===0){var a={text:""};F.insertNodes(e,a,{at:n.concat(0),voids:!0});return}for(var u=s.isEditor(r)?!1:L.isElement(r)&&(e.isInline(r)||r.children.length===0||j.isText(r.children[0])||e.isInline(r.children[0])),i=0,o=0;o<r.children.length;o++,i++){var l=x.get(e,n);if(!j.isText(l)){var f=r.children[o],d=l.children[i-1],D=o===r.children.length-1,v=j.isText(f)||L.isElement(f)&&e.isInline(f);if(v!==u)F.removeNodes(e,{at:n.concat(i),voids:!0}),i--;else if(L.isElement(f)){if(e.isInline(f)){if(d==null||!j.isText(d)){var g={text:""};F.insertNodes(e,g,{at:n.concat(i),voids:!0}),i++}else if(D){var p={text:""};F.insertNodes(e,p,{at:n.concat(i+1),voids:!0}),i++}}}else d!=null&&j.isText(d)&&(j.equals(f,d,{loose:!0})?(F.mergeNodes(e,{at:n.concat(i),voids:!0}),i--):d.text===""?(F.removeNodes(e,{at:n.concat(i-1),voids:!0}),i--):f.text===""&&(F.removeNodes(e,{at:n.concat(i),voids:!0}),i--))}}}},removeMark:t=>{var{selection:r}=e;if(r){var n=(d,D)=>{if(!j.isText(d))return!1;var[v,g]=s.parent(e,D);return!e.isVoid(v)||e.markableVoid(v)},a=E.isExpanded(r),u=!1;if(!a){var[i,o]=s.node(e,r);if(i&&n(i,o)){var[l]=s.parent(e,o);u=l&&e.markableVoid(l)}}if(a||u)F.unsetNodes(e,t,{match:n,split:!0,voids:!0});else{var f=jt({},s.marks(e)||{});delete f[t],e.marks=f,Ct.get(e)||e.onChange()}}},getDirtyPaths:t=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=t;return h.levels(r)}case"insert_node":{var{node:n,path:a}=t,u=h.levels(a),i=j.isText(n)?[]:Array.from(x.nodes(n),z=>{var[,Y]=z;return a.concat(Y)});return[...u,...i]}case"merge_node":{var{path:o}=t,l=h.ancestors(o),f=h.previous(o);return[...l,f]}case"move_node":{var{path:d,newPath:D}=t;if(h.equals(d,D))return[];var v=[],g=[];for(var p of h.ancestors(d)){var B=h.transform(p,t);v.push(B)}for(var C of h.ancestors(D)){var c=h.transform(C,t);g.push(c)}var O=g[g.length-1],S=D[D.length-1],R=O.concat(S);return[...v,...g,R]}case"remove_node":{var{path:$}=t,k=h.ancestors($);return[...k]}case"split_node":{var{path:q}=t,H=h.levels(q),P=h.next(q);return[...H,P]}default:return[]}},shouldNormalize:t=>{var{iteration:r,initialDirtyPathsLength:n}=t,a=n*42;if(r>a)throw new Error("Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0}};return e};function ai(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function We(e,t){if(e==null)return{};var r=ai(e,t),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var en=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,a=r?fi(t):t,u=U.None,i=U.None,o=0,l=null,f=null;for(var d of a){var D=d.codePointAt(0);if(!D)break;var v=Ai(d,D);if([u,i]=n?[i,v]:[v,u],ft(u,U.ZWJ)&&ft(i,U.ExtPict)&&(n?l=xn(t.substring(0,o)):l=xn(t.substring(0,t.length-o)),!l)||ft(u,U.RI)&&ft(i,U.RI)&&(f!==null?f=!f:n?f=!0:f=Oi(t.substring(0,t.length-o)),!f)||u!==U.None&&i!==U.None&&bi(u,i))break;o+=d.length}return o||1},ui=/\s/,ii=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,si=/['\u2018\u2019]/,oi=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;t.length>0;){var u=en(t,r),[i,o]=tn(t,u,r);if(li(i,o,r))a=!0,n+=u;else if(!a)n+=u;else break;t=o}return n},tn=(e,t,r)=>{if(r){var n=e.length-t;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,t),e.slice(t)]},li=function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(ui.test(t))return!1;if(si.test(t)){var a=en(r,n),[u,i]=tn(r,a,n);if(e(u,i,n))return!0}return!ii.test(t)},fi=function*(t){for(var r=t.length-1,n=0;n<t.length;n++){var a=t.charAt(r-n);if(di(a.charCodeAt(0))){var u=t.charAt(r-n-1);if(ci(u.charCodeAt(0))){yield u+a,n++;continue}}yield a}},ci=e=>e>=55296&&e<=56319,di=e=>e>=56320&&e<=57343,U;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(U||(U={}));var vi=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Di=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,hi=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,gi=/^[\u1100-\u115F\uA960-\uA97C]$/,Ci=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,pi=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,mi=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Bi=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Ei=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Ai=(e,t)=>{var r=U.Any;return e.search(vi)!==-1&&(r|=U.Extend),t===8205&&(r|=U.ZWJ),t>=127462&&t<=127487&&(r|=U.RI),e.search(Di)!==-1&&(r|=U.Prepend),e.search(hi)!==-1&&(r|=U.SpacingMark),e.search(gi)!==-1&&(r|=U.L),e.search(Ci)!==-1&&(r|=U.V),e.search(pi)!==-1&&(r|=U.T),e.search(mi)!==-1&&(r|=U.LV),e.search(Bi)!==-1&&(r|=U.LVT),e.search(Ei)!==-1&&(r|=U.ExtPict),r};function ft(e,t){return(e&t)!==0}var Fi=[[U.L,U.L|U.V|U.LV|U.LVT],[U.LV|U.V,U.V|U.T],[U.LVT|U.T,U.T],[U.Any,U.Extend|U.ZWJ],[U.Any,U.SpacingMark],[U.Prepend,U.Any],[U.ZWJ,U.ExtPict],[U.RI,U.RI]];function bi(e,t){return Fi.findIndex(r=>ft(e,r[0])&&ft(t,r[1]))===-1}var wi=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,xn=e=>e.search(wi)!==-1,yi=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Oi=e=>{var t=e.match(yi);if(t===null)return!1;var r=t[0].length/2;return r%2===1},kn=e=>De(e)&&x.isNodeList(e.children)&&!s.isEditor(e),L={isAncestor(e){return De(e)&&x.isNodeList(e.children)},isElement:kn,isElementList(e){return Array.isArray(e)&&e.every(t=>L.isElement(t))},isElementProps(e){return e.children!==void 0},isElementType:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return kn(t)&&t[n]===r},matches(e,t){for(var r in t)if(r!=="children"&&e[r]!==t[r])return!1;return!0}},xi=["text"],ki=["text"];function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Pn=new WeakMap,s={above(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:a=e.selection,match:u}=t;if(a){var i=s.path(e,a),o=n==="lowest";for(var[l,f]of s.levels(e,{at:i,voids:r,match:u,reverse:o}))if(!j.isText(l)){if(E.isRange(a)){if(h.isAncestor(f,a.anchor.path)&&h.isAncestor(f,a.focus.path))return[l,f]}else if(!h.equals(i,f))return[l,f]}}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.point(e,t,{edge:"end"}),a=s.end(e,[]),u={anchor:n,focus:a},{distance:i=1}=r,o=0,l;for(var f of s.positions(e,st(st({},r),{},{at:u}))){if(o>i)break;o!==0&&(l=f),o++}return l},before(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.start(e,[]),a=s.point(e,t,{edge:"start"}),u={anchor:n,focus:a},{distance:i=1}=r,o=0,l;for(var f of s.positions(e,st(st({},r),{},{at:u,reverse:!0}))){if(o>i)break;o!==0&&(l=f),o++}return l},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{direction:r="forward"}=t;e.deleteFragment(r)},edges(e,t){return[s.start(e,t),s.end(e,t)]},end(e,t){return s.point(e,t,{edge:"end"})},first(e,t){var r=s.path(e,t,{edge:"start"});return s.node(e,r)},fragment(e,t){var r=s.range(e,t),n=x.fragment(e,r);return n},hasBlocks(e,t){return t.children.some(r=>L.isElement(r)&&s.isBlock(e,r))},hasInlines(e,t){return t.children.some(r=>j.isText(r)||s.isInline(e,r))},hasTexts(e,t){return t.children.every(r=>j.isText(r))},insertBreak(e){e.insertBreak()},insertSoftBreak(e){e.insertSoftBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock(e,t){return!e.isInline(t)},isEditor(e){var t=Pn.get(e);if(t!==void 0)return t;if(!De(e))return!1;var r=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteBackward=="function"&&typeof e.deleteForward=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isInline=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||De(e.marks))&&(e.selection===null||E.isRange(e.selection))&&x.isNodeList(e.children)&&Ye.isOperationList(e.operations);return Pn.set(e,r),r},isEnd(e,t,r){var n=s.end(e,r);return X.equals(t,n)},isEdge(e,t,r){return s.isStart(e,t,r)||s.isEnd(e,t,r)},isEmpty(e,t){var{children:r}=t,[n]=r;return r.length===0||r.length===1&&j.isText(n)&&n.text===""&&!e.isVoid(t)},isInline(e,t){return e.isInline(t)},isNormalizing(e){var t=Fn.get(e);return t===void 0?!0:t},isStart(e,t,r){if(t.offset!==0)return!1;var n=s.start(e,r);return X.equals(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){var r=s.path(e,t,{edge:"end"});return s.node(e,r)},leaf(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.path(e,t,r),a=x.leaf(e,n);return[a,n]},*levels(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:a=!1}=t,{match:u}=t;if(u==null&&(u=()=>!0),!!r){var i=[],o=s.path(e,r);for(var[l,f]of x.levels(e,o))if(u(l,f)&&(i.push([l,f]),!a&&L.isElement(l)&&s.isVoid(e,l)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:r}=e;if(!r)return null;if(t)return t;if(E.isExpanded(r)){var[n]=s.nodes(e,{match:j.isText});if(n){var[a]=n,u=We(a,xi);return u}else return{}}var{anchor:i}=r,{path:o}=i,[l]=s.leaf(e,o);if(i.offset===0){var f=s.previous(e,{at:o,match:j.isText}),d=s.above(e,{match:C=>L.isElement(C)&&s.isVoid(e,C)&&e.markableVoid(C)});if(!d){var D=s.above(e,{match:C=>L.isElement(C)&&s.isBlock(e,C)});if(f&&D){var[v,g]=f,[,p]=D;h.isAncestor(p,g)&&(l=v)}}}var B=We(l,ki);return B},next(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:u=e.selection}=t;if(u){var i=s.after(e,u,{voids:n});if(i){var[,o]=s.last(e,[]),l=[i.path,o];if(h.isPath(u)&&u.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(h.isPath(u)){var[f]=s.parent(e,u);a=D=>f.children.includes(D)}else a=()=>!0;var[d]=s.nodes(e,{at:l,match:a,mode:r,voids:n});return d}}},node(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.path(e,t,r),a=x.get(e,n);return[a,n]},*nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=e.selection,mode:n="all",universal:a=!1,reverse:u=!1,voids:i=!1}=t,{match:o}=t;if(o||(o=()=>!0),!!r){var l,f;if(Si.isSpan(r))l=r[0],f=r[1];else{var d=s.path(e,r,{edge:"start"}),D=s.path(e,r,{edge:"end"});l=u?D:d,f=u?d:D}var v=x.nodes(e,{reverse:u,from:l,to:f,pass:S=>{var[R]=S;return i?!1:L.isElement(R)&&s.isVoid(e,R)}}),g=[],p;for(var[B,C]of v){var c=p&&h.compare(C,p[1])===0;if(!(n==="highest"&&c)){if(!o(B,C)){if(a&&!c&&j.isText(B))return;continue}if(n==="lowest"&&c){p=[B,C];continue}var O=n==="lowest"?p:[B,C];O&&(a?g.push(O):yield O),p=[B,C]}}n==="lowest"&&p&&(a?g.push(p):yield p),a&&(yield*g)}},normalize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:n}=t,a=f=>Qt.get(f)||[],u=f=>er.get(f)||new Set,i=f=>{var d=a(f).pop(),D=d.join(",");return u(f).delete(D),d};if(s.isNormalizing(e)){if(r){var o=Array.from(x.nodes(e),f=>{var[,d]=f;return d}),l=new Set(o.map(f=>f.join(",")));Qt.set(e,o),er.set(e,l)}a(e).length!==0&&s.withoutNormalizing(e,()=>{for(var f of a(e))if(x.has(e,f)){var d=s.node(e,f),[D,v]=d;L.isElement(D)&&D.children.length===0&&e.normalizeNode(d,{operation:n})}for(var g=a(e),p=g.length,B=0;g.length!==0;){if(!e.shouldNormalize({dirtyPaths:g,iteration:B,initialDirtyPathsLength:p,operation:n}))return;var C=i(e);if(x.has(e,C)){var c=s.node(e,C);e.normalizeNode(c,{operation:n})}B++,g=a(e)}})}},parent(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.path(e,t,r),a=h.parent(n),u=s.node(e,a);return u},path(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:n,edge:a}=r;if(h.isPath(t)){if(a==="start"){var[,u]=x.first(e,t);t=u}else if(a==="end"){var[,i]=x.last(e,t);t=i}}return E.isRange(t)&&(a==="start"?t=E.start(t):a==="end"?t=E.end(t):t=h.common(t.anchor.path,t.focus.path)),X.isPoint(t)&&(t=t.path),n!=null&&(t=t.slice(0,n)),t},hasPath(e,t){return x.has(e,t)},pathRef(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:i}=a,o=s.pathRefs(e);return o.delete(a),a.current=null,i}},u=s.pathRefs(e);return u.add(a),a},pathRefs(e){var t=bn.get(e);return t||(t=new Set,bn.set(e,t)),t},point(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:n="start"}=r;if(h.isPath(t)){var a;if(n==="end"){var[,u]=x.last(e,t);a=u}else{var[,i]=x.first(e,t);a=i}var o=x.get(e,a);if(!j.isText(o))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:a,offset:n==="end"?o.text.length:0}}if(E.isRange(t)){var[l,f]=E.edges(t);return n==="start"?l:f}return t},pointRef(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:i}=a,o=s.pointRefs(e);return o.delete(a),a.current=null,i}},u=s.pointRefs(e);return u.add(a),a},pointRefs(e){var t=wn.get(e);return t||(t=new Set,wn.set(e,t)),t},*positions(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=e.selection,unit:n="offset",reverse:a=!1,voids:u=!1}=t;if(!r)return;var i=s.range(e,r),[o,l]=E.edges(i),f=a?l:o,d=!1,D="",v=0,g=0,p=0;for(var[B,C]of s.nodes(e,{at:r,reverse:a,voids:u})){if(L.isElement(B)){if(!u&&e.isVoid(B)){yield s.start(e,C);continue}if(e.isInline(B))continue;if(s.hasInlines(e,B)){var c=h.isAncestor(C,l.path)?l:s.end(e,C),O=h.isAncestor(C,o.path)?o:s.start(e,C);D=s.string(e,{anchor:O,focus:c},{voids:u}),d=!0}}if(j.isText(B)){var S=h.equals(C,f.path);for(S?(g=a?f.offset:B.text.length-f.offset,p=f.offset):(g=B.text.length,p=a?g:0),(S||d||n==="offset")&&(yield{path:C,offset:p},d=!1);;){if(v===0){if(D==="")break;v=R(D,n,a),D=tn(D,v,a)[1]}if(p=a?p-v:p+v,g=g-v,g<0){v=-g;break}v=0,yield{path:C,offset:p}}}}function R($,k,q){return k==="character"?en($,q):k==="word"?oi($,q):k==="line"||k==="block"?$.length:1}},previous(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:u=e.selection}=t;if(u){var i=s.before(e,u,{voids:n});if(i){var[,o]=s.first(e,[]),l=[i.path,o];if(h.isPath(u)&&u.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(h.isPath(u)){var[f]=s.parent(e,u);a=D=>f.children.includes(D)}else a=()=>!0;var[d]=s.nodes(e,{reverse:!0,at:l,match:a,mode:r,voids:n});return d}}},range(e,t,r){if(E.isRange(t)&&!r)return t;var n=s.start(e,t),a=s.end(e,r||t);return{anchor:n,focus:a}},rangeRef(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:i}=a,o=s.rangeRefs(e);return o.delete(a),a.current=null,i}},u=s.rangeRefs(e);return u.add(a),a},rangeRefs(e){var t=yn.get(e);return t||(t=new Set,yn.set(e,t)),t},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){Fn.set(e,t)},start(e,t){return s.point(e,t,{edge:"start"})},string(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:n=!1}=r,a=s.range(e,t),[u,i]=E.edges(a),o="";for(var[l,f]of s.nodes(e,{at:a,match:j.isText,voids:n})){var d=l.text;h.equals(f,i.path)&&(d=d.slice(0,i.offset)),h.equals(f,u.path)&&(d=d.slice(u.offset)),o+=d}return o},unhangRange(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:n=!1}=r,[a,u]=E.edges(t);if(a.offset!==0||u.offset!==0||E.isCollapsed(t)||h.hasPrevious(u.path))return t;var i=s.above(e,{at:u,match:g=>L.isElement(g)&&s.isBlock(e,g),voids:n}),o=i?i[1]:[],l=s.start(e,a),f={anchor:l,focus:u},d=!0;for(var[D,v]of s.nodes(e,{at:f,match:j.isText,reverse:!0,voids:n})){if(d){d=!1;continue}if(D.text!==""||h.isBefore(v,o)){u={path:v,offset:D.text.length};break}}return{anchor:a,focus:u}},void(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s.above(e,st(st({},t),{},{match:r=>L.isElement(r)&&s.isVoid(e,r)}))},withoutNormalizing(e,t){var r=s.isNormalizing(e);s.setNormalizing(e,!1);try{t()}finally{s.setNormalizing(e,r)}s.normalize(e)}},Si={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(h.isPath)}},Pi=["children"],Ti=["text"],Tn=new WeakMap,x={ancestor(e,t){var r=x.get(e,t);if(j.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(he.stringify(r)));return r},*ancestors(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of h.ancestors(t,r)){var a=x.ancestor(e,n),u=[a,n];yield u}},child(e,t){if(j.isText(e))throw new Error("Cannot get the child of a text node: ".concat(he.stringify(e)));var r=e.children[t];if(r==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(he.stringify(e)));return r},*children(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,a=x.ancestor(e,t),{children:u}=a,i=n?u.length-1:0;n?i>=0:i<u.length;){var o=x.child(a,i),l=t.concat(i);yield[o,l],i=n?i-1:i+1}},common(e,t,r){var n=h.common(t,r),a=x.get(e,n);return[a,n]},descendant(e,t){var r=x.get(e,t);if(s.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(he.stringify(r)));return r},*descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of x.nodes(e,t))n.length!==0&&(yield[r,n])},*elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of x.nodes(e,t))L.isElement(r)&&(yield[r,n])},extractProps(e){if(L.isAncestor(e)){var t=We(e,Pi);return t}else{var t=We(e,Ti);return t}},first(e,t){for(var r=t.slice(),n=x.get(e,r);n&&!(j.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(j.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(he.stringify(e)));var r=Qr({children:e.children},n=>{var[a,u]=E.edges(t),i=x.nodes(n,{reverse:!0,pass:v=>{var[,g]=v;return!E.includes(t,g)}});for(var[,o]of i){if(!E.includes(t,o)){var l=x.parent(n,o),f=o[o.length-1];l.children.splice(f,1)}if(h.equals(o,u.path)){var d=x.leaf(n,o);d.text=d.text.slice(0,u.offset)}if(h.equals(o,a.path)){var D=x.leaf(n,o);D.text=D.text.slice(a.offset)}}s.isEditor(n)&&(n.selection=null)});return r.children},get(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(j.isText(r)||!r.children[a])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(he.stringify(e)));r=r.children[a]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(j.isText(r)||!r.children[a])return!1;r=r.children[a]}return!0},isNode(e){return j.isText(e)||L.isElement(e)||s.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=Tn.get(e);if(t!==void 0)return t;var r=e.every(n=>x.isNode(n));return Tn.set(e,r),r},last(e,t){for(var r=t.slice(),n=x.get(e,r);n&&!(j.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],r.push(a)}return[n,r]},leaf(e,t){var r=x.get(e,t);if(!j.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(he.stringify(r)));return r},*levels(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of h.levels(t,r)){var a=x.get(e,n);yield[a,n]}},matches(e,t){return L.isElement(e)&&L.isElementProps(t)&&L.matches(e,t)||j.isText(e)&&j.isTextProps(t)&&j.matches(e,t)},*nodes(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:a=[],to:u}=t,i=new Set,o=[],l=e;!(u&&(n?h.isBefore(o,u):h.isAfter(o,u)));){if(i.has(l)||(yield[l,o]),!i.has(l)&&!j.isText(l)&&l.children.length!==0&&(r==null||r([l,o])===!1)){i.add(l);var f=n?l.children.length-1:0;h.isAncestor(o,a)&&(f=a[o.length]),o=o.concat(f),l=x.get(e,o);continue}if(o.length===0)break;if(!n){var d=h.next(o);if(x.has(e,d)){o=d,l=x.get(e,o);continue}}if(n&&o[o.length-1]!==0){var D=h.previous(o);o=D,l=x.get(e,o);continue}o=h.parent(o),l=x.get(e,o),i.add(l)}},parent(e,t){var r=h.parent(t),n=x.get(e,r);if(j.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string(e){return j.isText(e)?e.text:e.children.map(x.string).join("")},*texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of x.nodes(e,t))j.isText(r)&&(yield[r,n])}};function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ye={isNodeOperation(e){return Ye.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!De(e))return!1;switch(e.type){case"insert_node":return h.isPath(e.path)&&x.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&h.isPath(e.path);case"merge_node":return typeof e.position=="number"&&h.isPath(e.path)&&De(e.properties);case"move_node":return h.isPath(e.path)&&h.isPath(e.newPath);case"remove_node":return h.isPath(e.path)&&x.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&h.isPath(e.path);case"set_node":return h.isPath(e.path)&&De(e.properties)&&De(e.newProperties);case"set_selection":return e.properties===null&&E.isRange(e.newProperties)||e.newProperties===null&&E.isRange(e.properties)||De(e.properties)&&De(e.newProperties);case"split_node":return h.isPath(e.path)&&typeof e.position=="number"&&De(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>Ye.isOperation(t))},isSelectionOperation(e){return Ye.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Ye.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ie(ie({},e),{},{type:"remove_node"});case"insert_text":return ie(ie({},e),{},{type:"remove_text"});case"merge_node":return ie(ie({},e),{},{type:"split_node",path:h.previous(e.path)});case"move_node":{var{newPath:t,path:r}=e;if(h.equals(t,r))return e;if(h.isSibling(r,t))return ie(ie({},e),{},{path:t,newPath:r});var n=h.transform(r,e),a=h.transform(h.next(r),e);return ie(ie({},e),{},{path:n,newPath:a})}case"remove_node":return ie(ie({},e),{},{type:"insert_node"});case"remove_text":return ie(ie({},e),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:i}=e;return ie(ie({},e),{},{properties:i,newProperties:u})}case"set_selection":{var{properties:o,newProperties:l}=e;return o==null?ie(ie({},e),{},{properties:l,newProperties:null}):l==null?ie(ie({},e),{},{properties:null,newProperties:o}):ie(ie({},e),{},{properties:l,newProperties:o})}case"split_node":return ie(ie({},e),{},{type:"merge_node",path:h.next(e.path)})}}},h={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=t,n=h.levels(e,t);return r?n=n.slice(1):n=n.slice(0,-1),n},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var a=e[n],u=t[n];if(a!==u)break;r.push(a)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),u=e[r],i=t[r];return h.equals(n,a)&&u>i},endsAt(e,t){var r=e.length,n=e.slice(0,r),a=t.slice(0,r);return h.equals(n,a)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),u=e[r],i=t[r];return h.equals(n,a)&&u<i},equals(e,t){return e.length===t.length&&e.every((r,n)=>r===t[n])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return h.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&h.compare(e,t)===0},isBefore(e,t){return h.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&h.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&h.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&h.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&h.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1),a=e[e.length-1],u=t[t.length-1];return a!==u&&h.equals(r,n)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=t,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return r&&n.reverse(),n},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!h.isAncestor(t,e)&&!h.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var n=[...e],{affinity:a="forward"}=r;if(e.length===0)return n;switch(t.type){case"insert_node":{var{path:u}=t;(h.equals(u,n)||h.endsBefore(u,n)||h.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:i}=t;if(h.equals(i,n)||h.isAncestor(i,n))return null;h.endsBefore(i,n)&&(n[i.length-1]-=1);break}case"merge_node":{var{path:o,position:l}=t;h.equals(o,n)||h.endsBefore(o,n)?n[o.length-1]-=1:h.isAncestor(o,n)&&(n[o.length-1]-=1,n[o.length]+=l);break}case"split_node":{var{path:f,position:d}=t;if(h.equals(f,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else h.endsBefore(f,n)?n[f.length-1]+=1:h.isAncestor(f,n)&&e[f.length]>=d&&(n[f.length-1]+=1,n[f.length]-=d);break}case"move_node":{var{path:D,newPath:v}=t;if(h.equals(D,v))return n;if(h.isAncestor(D,n)||h.equals(D,n)){var g=v.slice();return h.endsBefore(D,v)&&D.length<v.length&&(g[D.length-1]-=1),g.concat(n.slice(D.length))}else h.isSibling(D,v)&&(h.isAncestor(v,n)||h.equals(v,n))?h.endsBefore(D,n)?n[D.length-1]-=1:n[D.length-1]+=1:h.endsBefore(v,n)||h.equals(v,n)||h.isAncestor(v,n)?(h.endsBefore(D,n)&&(n[D.length-1]-=1),n[v.length-1]+=1):h.endsBefore(D,n)&&(h.equals(v,n)&&(n[v.length-1]+=1),n[D.length-1]-=1);break}}return n}},Ri={transform(e,t){var{current:r,affinity:n}=e;if(r!=null){var a=h.transform(r,t,{affinity:n});e.current=a,a==null&&e.unref()}}};function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var X={compare(e,t){var r=h.compare(e.path,t.path);return r===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter(e,t){return X.compare(e,t)===1},isBefore(e,t){return X.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&h.equals(e.path,t.path)},isPoint(e){return De(e)&&typeof e.offset=="number"&&h.isPath(e.path)},transform(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Qr(e,n=>{if(n===null)return null;var{affinity:a="forward"}=r,{path:u,offset:i}=n;switch(t.type){case"insert_node":case"move_node":{n.path=h.transform(u,t,r);break}case"insert_text":{h.equals(t.path,u)&&(t.offset<i||t.offset===i&&a==="forward")&&(n.offset+=t.text.length);break}case"merge_node":{h.equals(t.path,u)&&(n.offset+=t.position),n.path=h.transform(u,t,r);break}case"remove_text":{h.equals(t.path,u)&&t.offset<=i&&(n.offset-=Math.min(i-t.offset,t.text.length));break}case"remove_node":{if(h.equals(t.path,u)||h.isAncestor(t.path,u))return null;n.path=h.transform(u,t,r);break}case"split_node":{if(h.equals(t.path,u)){if(t.position===i&&a==null)return null;(t.position<i||t.position===i&&a==="forward")&&(n.offset-=t.position,n.path=h.transform(u,t,Nn(Nn({},r),{},{affinity:"forward"})))}else n.path=h.transform(u,t,r);break}}})}},Mi={transform(e,t){var{current:r,affinity:n}=e;if(r!=null){var a=X.transform(r,t,{affinity:n});e.current=a,a==null&&e.unref()}}},Ni=["anchor","focus"];function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var E={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:a}=e;return E.isBackward(e)===r?[n,a]:[a,n]},end(e){var[,t]=E.edges(e);return t},equals(e,t){return X.equals(e.anchor,t.anchor)&&X.equals(e.focus,t.focus)},includes(e,t){if(E.isRange(t)){if(E.includes(e,t.anchor)||E.includes(e,t.focus))return!0;var[r,n]=E.edges(e),[a,u]=E.edges(t);return X.isBefore(r,a)&&X.isAfter(n,u)}var[i,o]=E.edges(e),l=!1,f=!1;return X.isPoint(t)?(l=X.compare(t,i)>=0,f=X.compare(t,o)<=0):(l=h.compare(t,i.path)>=0,f=h.compare(t,o.path)<=0),l&&f},intersection(e,t){var r=We(e,Ni),[n,a]=E.edges(e),[u,i]=E.edges(t),o=X.isBefore(n,u)?u:n,l=X.isBefore(a,i)?a:i;return X.isBefore(l,o)?null:ji({anchor:o,focus:l},r)},isBackward(e){var{anchor:t,focus:r}=e;return X.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return X.equals(t,r)},isExpanded(e){return!E.isCollapsed(e)},isForward(e){return!E.isBackward(e)},isRange(e){return De(e)&&X.isPoint(e.anchor)&&X.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=E.edges(e);return t},transform(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Qr(e,n=>{if(n===null)return null;var{affinity:a="inward"}=r,u,i;if(a==="inward"){var o=E.isCollapsed(n);E.isForward(n)?(u="forward",i=o?u:"backward"):(u="backward",i=o?u:"forward")}else a==="outward"?E.isForward(n)?(u="backward",i="forward"):(u="forward",i="backward"):(u=a,i=a);var l=X.transform(n.anchor,t,{affinity:u}),f=X.transform(n.focus,t,{affinity:i});if(!l||!f)return null;n.anchor=l,n.focus=f})}},Ii={transform(e,t){var{current:r,affinity:n}=e;if(r!=null){var a=E.transform(r,t,{affinity:n});e.current=a,a==null&&e.unref()}}},In=void 0,he={setScrubber(e){In=e},stringify(e){return JSON.stringify(e,In)}},Na=(e,t)=>{for(var r in e){var n=e[r],a=t[r];if(De(n)&&De(a)){if(!Na(n,a))return!1}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(n!==a)return!1}for(var i in t)if(e[i]===void 0&&t[i]!==void 0)return!1;return!0},Li=["text"],Wi=["anchor","focus"];function Ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ln(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ln(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var j={equals(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function a(u){var i=We(u,Li);return i}return Na(n?a(e):e,n?a(t):t)},isText(e){return De(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>j.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var r in t)if(r!=="text"&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations(e,t){var r=[Ie({},e)];for(var n of t){var a=We(n,Wi),[u,i]=E.edges(n),o=[],l=0,f=u.offset,d=i.offset;for(var D of r){var{length:v}=D.text,g=l;if(l+=v,f<=g&&l<=d){Object.assign(D,a),o.push(D);continue}if(f!==d&&(f===l||d===g)||f>l||d<g||d===g&&g!==0){o.push(D);continue}var p=D,B=void 0,C=void 0;if(d<l){var c=d-g;C=Ie(Ie({},p),{},{text:p.text.slice(c)}),p=Ie(Ie({},p),{},{text:p.text.slice(0,c)})}if(f>g){var O=f-g;B=Ie(Ie({},p),{},{text:p.text.slice(0,O)}),p=Ie(Ie({},p),{},{text:p.text.slice(O)})}Object.assign(p,a),B&&o.push(B),o.push(p),C&&o.push(C)}r=o}return r}};function Wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var _i=(e,t,r)=>{switch(r.type){case"insert_node":{var{path:n,node:a}=r,u=x.parent(e,n),i=n[n.length-1];if(i>u.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(u.children.splice(i,0,a),t)for(var[o,l]of E.points(t))t[l]=X.transform(o,r);break}case"insert_text":{var{path:f,offset:d,text:D}=r;if(D.length===0)break;var v=x.leaf(e,f),g=v.text.slice(0,d),p=v.text.slice(d);if(v.text=g+D+p,t)for(var[B,C]of E.points(t))t[C]=X.transform(B,r);break}case"merge_node":{var{path:c}=r,O=x.get(e,c),S=h.previous(c),R=x.get(e,S),$=x.parent(e,c),k=c[c.length-1];if(j.isText(O)&&j.isText(R))R.text+=O.text;else if(!j.isText(O)&&!j.isText(R))R.children.push(...O.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(c,"] to nodes of different interfaces: ").concat(he.stringify(O)," ").concat(he.stringify(R)));if($.children.splice(k,1),t)for(var[q,H]of E.points(t))t[H]=X.transform(q,r);break}case"move_node":{var{path:P,newPath:z}=r;if(h.isAncestor(P,z))throw new Error("Cannot move a path [".concat(P,"] to new path [").concat(z,"] because the destination is inside itself."));var Y=x.get(e,P),w=x.parent(e,P),N=P[P.length-1];w.children.splice(N,1);var W=h.transform(P,r),M=x.get(e,h.parent(W)),ee=W[W.length-1];if(M.children.splice(ee,0,Y),t)for(var[G,re]of E.points(t))t[re]=X.transform(G,r);break}case"remove_node":{var{path:te}=r,ae=te[te.length-1],oe=x.parent(e,te);if(oe.children.splice(ae,1),t)for(var[ue,m]of E.points(t)){var b=X.transform(ue,r);if(t!=null&&b!=null)t[m]=b;else{var y=void 0,_=void 0;for(var[K,Z]of x.texts(e))if(h.compare(Z,te)===-1)y=[K,Z];else{_=[K,Z];break}var Q=!1;y&&_&&(h.equals(_[1],te)?Q=!h.hasPrevious(_[1]):Q=h.common(y[1],te).length<h.common(_[1],te).length),y&&!Q?(ue.path=y[1],ue.offset=y[0].text.length):_?(ue.path=_[1],ue.offset=0):t=null}}break}case"remove_text":{var{path:ne,offset:J,text:le}=r;if(le.length===0)break;var ce=x.leaf(e,ne),Be=ce.text.slice(0,J),Ce=ce.text.slice(J+le.length);if(ce.text=Be+Ce,t)for(var[Fe,pe]of E.points(t))t[pe]=X.transform(Fe,r);break}case"set_node":{var{path:xe,properties:ve,newProperties:ke}=r;if(xe.length===0)throw new Error("Cannot set properties on the root node!");var $e=x.get(e,xe);for(var de in ke){if(de==="children"||de==="text")throw new Error('Cannot set the "'.concat(de,'" property of nodes!'));var ze=ke[de];ze==null?delete $e[de]:$e[de]=ze}for(var qe in ve)ke.hasOwnProperty(qe)||delete $e[qe];break}case"set_selection":{var{newProperties:ge}=r;if(ge==null)t=ge;else{if(t==null){if(!E.isRange(ge))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(he.stringify(ge)," when there is no current selection."));t=pt({},ge)}for(var He in ge){var Tt=ge[He];if(Tt==null){if(He==="anchor"||He==="focus")throw new Error('Cannot remove the "'.concat(He,'" selection property'));delete t[He]}else t[He]=Tt}}break}case"split_node":{var{path:Se,position:Xe,properties:Rt}=r;if(Se.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Se,"] because the root node cannot be split."));var Ze=x.get(e,Se),wu=x.parent(e,Se),yu=Se[Se.length-1],fr;if(j.isText(Ze)){var Ou=Ze.text.slice(0,Xe),xu=Ze.text.slice(Xe);Ze.text=Ou,fr=pt(pt({},Rt),{},{text:xu})}else{var ku=Ze.children.slice(0,Xe),Su=Ze.children.slice(Xe);Ze.children=ku,fr=pt(pt({},Rt),{},{children:Su})}if(wu.children.splice(yu+1,0,fr),t)for(var[Pu,Tu]of E.points(t))t[Tu]=X.transform(Pu,r);break}}return t},$i={transform(e,t){e.children=En(e.children);var r=e.selection&&En(e.selection);try{r=_i(e,r,t)}finally{e.children=An(e.children),r?e.selection=at(r)?An(r):r:e.selection=null}}},zi=["text"],qi=["children"];function _n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_n(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_n(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Hi={insertNodes(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1,mode:u="lowest"}=r,{at:i,match:o,select:l}=r;if(x.isNode(t)&&(t=[t]),t.length!==0){var[f]=t;if(i||(e.selection?i=e.selection:e.children.length>0?i=s.end(e,[]):i=[0],l=!0),l==null&&(l=!1),E.isRange(i))if(n||(i=s.unhangRange(e,i,{voids:a})),E.isCollapsed(i))i=i.anchor;else{var[,d]=E.edges(i),D=s.pointRef(e,d);F.delete(e,{at:i}),i=D.unref()}if(X.isPoint(i)){o==null&&(j.isText(f)?o=k=>j.isText(k):e.isInline(f)?o=k=>j.isText(k)||s.isInline(e,k):o=k=>L.isElement(k)&&s.isBlock(e,k));var[v]=s.nodes(e,{at:i.path,match:o,mode:u,voids:a});if(v){var[,g]=v,p=s.pathRef(e,g),B=s.isEnd(e,i,g);F.splitNodes(e,{at:i,match:o,mode:u,voids:a});var C=p.unref();i=B?h.next(C):C}else return}var c=h.parent(i),O=i[i.length-1];if(!(!a&&s.void(e,{at:c}))){for(var S of t){var R=c.concat(O);O++,e.apply({type:"insert_node",path:R,node:S}),i=h.next(i)}if(i=h.previous(i),l){var $=s.end(e,i);$&&F.select(e,$)}}}})},liftNodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:n="lowest",voids:a=!1}=t,{match:u}=t;if(u==null&&(u=h.isPath(r)?ot(e,r):S=>L.isElement(S)&&s.isBlock(e,S)),!!r){var i=s.nodes(e,{at:r,match:u,mode:n,voids:a}),o=Array.from(i,S=>{var[,R]=S;return s.pathRef(e,R)});for(var l of o){var f=l.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var d=s.node(e,h.parent(f)),[D,v]=d,g=f[f.length-1],{length:p}=D.children;if(p===1){var B=h.next(v);F.moveNodes(e,{at:f,to:B,voids:a}),F.removeNodes(e,{at:v,voids:a})}else if(g===0)F.moveNodes(e,{at:f,to:v,voids:a});else if(g===p-1){var C=h.next(v);F.moveNodes(e,{at:f,to:C,voids:a})}else{var c=h.next(f),O=h.next(v);F.splitNodes(e,{at:c,voids:a}),F.moveNodes(e,{at:f,to:O,voids:a})}}}})},mergeNodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{match:r,at:n=e.selection}=t,{hanging:a=!1,voids:u=!1,mode:i="lowest"}=t;if(n){if(r==null)if(h.isPath(n)){var[o]=s.parent(e,n);r=P=>o.children.includes(P)}else r=P=>L.isElement(P)&&s.isBlock(e,P);if(!a&&E.isRange(n)&&(n=s.unhangRange(e,n,{voids:u})),E.isRange(n))if(E.isCollapsed(n))n=n.anchor;else{var[,l]=E.edges(n),f=s.pointRef(e,l);F.delete(e,{at:n}),n=f.unref(),t.at==null&&F.select(e,n)}var[d]=s.nodes(e,{at:n,match:r,voids:u,mode:i}),D=s.previous(e,{at:n,match:r,voids:u,mode:i});if(!(!d||!D)){var[v,g]=d,[p,B]=D;if(!(g.length===0||B.length===0)){var C=h.next(B),c=h.common(g,B),O=h.isSibling(g,B),S=Array.from(s.levels(e,{at:g}),P=>{var[z]=P;return z}).slice(c.length).slice(0,-1),R=s.above(e,{at:g,mode:"highest",match:P=>S.includes(P)&&ja(e,P)}),$=R&&s.pathRef(e,R[1]),k,q;if(j.isText(v)&&j.isText(p)){var H=We(v,zi);q=p.text.length,k=H}else if(L.isElement(v)&&L.isElement(p)){var H=We(v,qi);q=p.children.length,k=H}else throw new Error("Cannot merge the node at path [".concat(g,"] with the previous sibling because it is not the same kind: ").concat(he.stringify(v)," ").concat(he.stringify(p)));O||F.moveNodes(e,{at:g,to:C,voids:u}),$&&F.removeNodes(e,{at:$.current,voids:u}),L.isElement(p)&&s.isEmpty(e,p)||j.isText(p)&&p.text===""&&B[B.length-1]!==0?F.removeNodes(e,{at:B,voids:u}):e.apply({type:"merge_node",path:C,position:q,properties:k}),$&&$.unref()}}}})},moveNodes(e,t){s.withoutNormalizing(e,()=>{var{to:r,at:n=e.selection,mode:a="lowest",voids:u=!1}=t,{match:i}=t;if(n){i==null&&(i=h.isPath(n)?ot(e,n):g=>L.isElement(g)&&s.isBlock(e,g));var o=s.pathRef(e,r),l=s.nodes(e,{at:n,match:i,mode:a,voids:u}),f=Array.from(l,g=>{var[,p]=g;return s.pathRef(e,p)});for(var d of f){var D=d.unref(),v=o.current;D.length!==0&&e.apply({type:"move_node",path:D,newPath:v}),o.current&&h.isSibling(v,D)&&h.isAfter(v,D)&&(o.current=h.next(o.current))}o.unref()}})},removeNodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:n=!1,mode:a="lowest"}=t,{at:u=e.selection,match:i}=t;if(u){i==null&&(i=h.isPath(u)?ot(e,u):v=>L.isElement(v)&&s.isBlock(e,v)),!r&&E.isRange(u)&&(u=s.unhangRange(e,u,{voids:n}));var o=s.nodes(e,{at:u,match:i,mode:a,voids:n}),l=Array.from(o,v=>{var[,g]=v;return s.pathRef(e,g)});for(var f of l){var d=f.unref();if(d){var[D]=s.node(e,d);e.apply({type:"remove_node",path:d,node:D})}}}})},setNodes(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.withoutNormalizing(e,()=>{var{match:n,at:a=e.selection,compare:u,merge:i}=r,{hanging:o=!1,mode:l="lowest",split:f=!1,voids:d=!1}=r;if(a){if(n==null&&(n=h.isPath(a)?ot(e,a):q=>L.isElement(q)&&s.isBlock(e,q)),!o&&E.isRange(a)&&(a=s.unhangRange(e,a,{voids:d})),f&&E.isRange(a)){if(E.isCollapsed(a)&&s.leaf(e,a.anchor)[0].text.length>0)return;var D=s.rangeRef(e,a,{affinity:"inward"}),[v,g]=E.edges(a),p=l==="lowest"?"lowest":"highest",B=s.isEnd(e,g,g.path);F.splitNodes(e,{at:g,match:n,mode:p,voids:d,always:!B});var C=s.isStart(e,v,v.path);F.splitNodes(e,{at:v,match:n,mode:p,voids:d,always:!C}),a=D.unref(),r.at==null&&F.select(e,a)}u||(u=(q,H)=>q!==H);for(var[c,O]of s.nodes(e,{at:a,match:n,mode:l,voids:d})){var S={},R={};if(O.length!==0){var $=!1;for(var k in t)k==="children"||k==="text"||u(t[k],c[k])&&($=!0,c.hasOwnProperty(k)&&(S[k]=c[k]),i?t[k]!=null&&(R[k]=i(c[k],t[k])):t[k]!=null&&(R[k]=t[k]));$&&e.apply({type:"set_node",path:O,properties:S,newProperties:R})}}}})},splitNodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:n=!1}=t,{match:a,at:u=e.selection,height:i=0,always:o=!1}=t;if(a==null&&(a=re=>L.isElement(re)&&s.isBlock(e,re)),E.isRange(u)&&(u=Vi(e,u)),h.isPath(u)){var l=u,f=s.point(e,l),[d]=s.parent(e,l);a=re=>re===d,i=f.path.length-l.length+1,u=f,o=!0}if(u){var D=s.pointRef(e,u,{affinity:"backward"}),v;try{var[g]=s.nodes(e,{at:u,match:a,mode:r,voids:n});if(!g)return;var p=s.void(e,{at:u,mode:"highest"}),B=0;if(!n&&p){var[C,c]=p;if(L.isElement(C)&&e.isInline(C)){var O=s.after(e,c);if(!O){var S={text:""},R=h.next(c);F.insertNodes(e,S,{at:R,voids:n}),O=s.point(e,R)}u=O,o=!0}var $=u.path.length-c.length;i=$+1,o=!0}v=s.pointRef(e,u);var k=u.path.length-i,[,q]=g,H=u.path.slice(0,k),P=i===0?u.offset:u.path[k]+B;for(var[z,Y]of s.levels(e,{at:H,reverse:!0,voids:n})){var w=!1;if(Y.length<q.length||Y.length===0||!n&&L.isElement(z)&&s.isVoid(e,z))break;var N=D.current,W=s.isEnd(e,N,Y);if(o||!D||!s.isEdge(e,N,Y)){w=!0;var M=x.extractProps(z);e.apply({type:"split_node",path:Y,position:P,properties:M})}P=Y[Y.length-1]+(w||W?1:0)}if(t.at==null){var ee=v.current||s.end(e,[]);F.select(e,ee)}}finally{var G;D.unref(),(G=v)===null||G===void 0||G.unref()}}})},unsetNodes(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var a of t)n[a]=null;F.setNodes(e,n,r)},unwrapNodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{mode:r="lowest",split:n=!1,voids:a=!1}=t,{at:u=e.selection,match:i}=t;if(u){i==null&&(i=h.isPath(u)?ot(e,u):v=>L.isElement(v)&&s.isBlock(e,v)),h.isPath(u)&&(u=s.range(e,u));var o=E.isRange(u)?s.rangeRef(e,u):null,l=s.nodes(e,{at:u,match:i,mode:r,voids:a}),f=Array.from(l,v=>{var[,g]=v;return s.pathRef(e,g)}).reverse(),d=function(g){var p=g.unref(),[B]=s.node(e,p),C=s.range(e,p);n&&o&&(C=E.intersection(o.current,C)),F.liftNodes(e,{at:C,match:c=>L.isAncestor(B)&&B.children.includes(c),voids:a})};for(var D of f)d(D);o&&o.unref()}})},wrapNodes(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.withoutNormalizing(e,()=>{var{mode:n="lowest",split:a=!1,voids:u=!1}=r,{match:i,at:o=e.selection}=r;if(o){if(i==null&&(h.isPath(o)?i=ot(e,o):e.isInline(t)?i=C=>L.isElement(C)&&s.isInline(e,C)||j.isText(C):i=C=>L.isElement(C)&&s.isBlock(e,C)),a&&E.isRange(o)){var[l,f]=E.edges(o),d=s.rangeRef(e,o,{affinity:"inward"});F.splitNodes(e,{at:f,match:i,voids:u}),F.splitNodes(e,{at:l,match:i,voids:u}),o=d.unref(),r.at==null&&F.select(e,o)}var D=Array.from(s.nodes(e,{at:o,match:e.isInline(t)?C=>L.isElement(C)&&s.isBlock(e,C):C=>s.isEditor(C),mode:"lowest",voids:u}));for(var[,v]of D){var g=E.isRange(o)?E.intersection(o,s.range(e,v)):o;if(g){var p=Array.from(s.nodes(e,{at:g,match:i,mode:n,voids:u}));if(p.length>0){var B=function(){var[C]=p,c=p[p.length-1],[,O]=C,[,S]=c;if(O.length===0&&S.length===0)return"continue";var R=h.equals(O,S)?h.parent(O):h.common(O,S),$=s.range(e,O,S),k=s.node(e,R),[q]=k,H=R.length+1,P=h.next(S.slice(0,H)),z=$n($n({},t),{},{children:[]});F.insertNodes(e,z,{at:P,voids:u}),F.moveNodes(e,{at:$,match:Y=>L.isAncestor(q)&&q.children.includes(Y),to:P.concat(0),voids:u})}();if(B==="continue")continue}}}}})}},ja=(e,t)=>{if(L.isElement(t)){var r=t;return s.isVoid(e,t)?!0:r.children.length===1?ja(e,r.children[0]):!1}else return!s.isEditor(t)},Vi=(e,t)=>{if(E.isCollapsed(t))return t.anchor;var[,r]=E.edges(t),n=s.pointRef(e,r);return F.delete(e,{at:t}),n.unref()},ot=(e,t)=>{var[r]=s.node(e,t);return n=>n===r};function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ki={collapse(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n){if(r==="anchor")F.select(e,n.anchor);else if(r==="focus")F.select(e,n.focus);else if(r==="start"){var[a]=E.edges(n);F.select(e,a)}else if(r==="end"){var[,u]=E.edges(n);F.select(e,u)}}else return},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:a="character",reverse:u=!1}=t,{edge:i=null}=t;if(r){i==="start"&&(i=E.isBackward(r)?"focus":"anchor"),i==="end"&&(i=E.isBackward(r)?"anchor":"focus");var{anchor:o,focus:l}=r,f={distance:n,unit:a},d={};if(i==null||i==="anchor"){var D=u?s.before(e,o,f):s.after(e,o,f);D&&(d.anchor=D)}if(i==null||i==="focus"){var v=u?s.before(e,l,f):s.after(e,l,f);v&&(d.focus=v)}F.setSelection(e,d)}},select(e,t){var{selection:r}=e;if(t=s.range(e,t),r){F.setSelection(e,t);return}if(!E.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(he.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})},setPoint(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:n}=e,{edge:a="both"}=r;if(n){a==="start"&&(a=E.isBackward(n)?"focus":"anchor"),a==="end"&&(a=E.isBackward(n)?"anchor":"focus");var{anchor:u,focus:i}=n,o=a==="anchor"?u:i;F.setSelection(e,{[a==="anchor"?"anchor":"focus"]:qn(qn({},o),t)})}},setSelection(e,t){var{selection:r}=e,n={},a={};if(r){for(var u in t)(u==="anchor"&&t.anchor!=null&&!X.equals(t.anchor,r.anchor)||u==="focus"&&t.focus!=null&&!X.equals(t.focus,r.focus)||u!=="anchor"&&u!=="focus"&&t[u]!==r[u])&&(n[u]=r[u],a[u]=t[u]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:a})}}},Ui={delete(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.withoutNormalizing(e,()=>{var{reverse:r=!1,unit:n="character",distance:a=1,voids:u=!1}=t,{at:i=e.selection,hanging:o=!1}=t;if(i){var l=!1;if(E.isRange(i)&&E.isCollapsed(i)&&(l=!0,i=i.anchor),X.isPoint(i)){var f=s.void(e,{at:i,mode:"highest"});if(!u&&f){var[,d]=f;i=d}else{var D={unit:n,distance:a},v=r?s.before(e,i,D)||s.start(e,[]):s.after(e,i,D)||s.end(e,[]);i={anchor:i,focus:v},o=!0}}if(h.isPath(i)){F.removeNodes(e,{at:i,voids:u});return}if(!E.isCollapsed(i)){if(!o){var[,g]=E.edges(i),p=s.end(e,[]);X.equals(g,p)||(i=s.unhangRange(e,i,{voids:u}))}var[B,C]=E.edges(i),c=s.above(e,{match:J=>L.isElement(J)&&s.isBlock(e,J),at:B,voids:u}),O=s.above(e,{match:J=>L.isElement(J)&&s.isBlock(e,J),at:C,voids:u}),S=c&&O&&!h.equals(c[1],O[1]),R=h.equals(B.path,C.path),$=u?null:s.void(e,{at:B,mode:"highest"}),k=u?null:s.void(e,{at:C,mode:"highest"});if($){var q=s.before(e,B);q&&c&&h.isAncestor(c[1],q.path)&&(B=q)}if(k){var H=s.after(e,C);H&&O&&h.isAncestor(O[1],H.path)&&(C=H)}var P=[],z;for(var Y of s.nodes(e,{at:i,voids:u})){var[w,N]=Y;z&&h.compare(N,z)===0||(!u&&L.isElement(w)&&s.isVoid(e,w)||!h.isCommon(N,B.path)&&!h.isCommon(N,C.path))&&(P.push(Y),z=N)}var W=Array.from(P,J=>{var[,le]=J;return s.pathRef(e,le)}),M=s.pointRef(e,B),ee=s.pointRef(e,C),G="";if(!R&&!$){var re=M.current,[te]=s.leaf(e,re),{path:ae}=re,{offset:oe}=B,ue=te.text.slice(oe);ue.length>0&&(e.apply({type:"remove_text",path:ae,offset:oe,text:ue}),G=ue)}if(W.reverse().map(J=>J.unref()).filter(J=>J!==null).forEach(J=>F.removeNodes(e,{at:J,voids:u})),!k){var m=ee.current,[b]=s.leaf(e,m),{path:y}=m,_=R?B.offset:0,K=b.text.slice(_,C.offset);K.length>0&&(e.apply({type:"remove_text",path:y,offset:_,text:K}),G=K)}!R&&S&&ee.current&&M.current&&F.mergeNodes(e,{at:ee.current,hanging:!0,voids:u}),l&&r&&n==="character"&&G.length>1&&G.match(/[\u0E00-\u0E7F]+/)&&F.insertText(e,G.slice(0,G.length-a));var Z=M.unref(),Q=ee.unref(),ne=r?Z||Q:Q||Z;t.at==null&&ne&&F.select(e,ne)}}})},insertFragment(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1}=r,{at:u=e.selection}=r;if(t.length){if(u)if(E.isRange(u))if(n||(u=s.unhangRange(e,u,{voids:a})),E.isCollapsed(u))u=u.anchor;else{var[,i]=E.edges(u);if(!a&&s.void(e,{at:i}))return;var o=s.pointRef(e,i);F.delete(e,{at:u}),u=o.unref()}else h.isPath(u)&&(u=s.start(e,u));else return;if(!(!a&&s.void(e,{at:u}))){var l=s.above(e,{at:u,match:m=>L.isElement(m)&&s.isInline(e,m),mode:"highest",voids:a});if(l){var[,f]=l;if(s.isEnd(e,u,f)){var d=s.after(e,f);u=d}else if(s.isStart(e,u,f)){var D=s.before(e,f);u=D}}var v=s.above(e,{match:m=>L.isElement(m)&&s.isBlock(e,m),at:u,voids:a}),[,g]=v,p=s.isStart(e,u,g),B=s.isEnd(e,u,g),C=p&&B,c=!p||p&&B,O=!B,[,S]=x.first({children:t},[]),[,R]=x.last({children:t},[]),$=[],k=m=>{var[b,y]=m,_=y.length===0;return _?!1:C?!0:!(c&&h.isAncestor(y,S)&&L.isElement(b)&&!e.isVoid(b)&&!e.isInline(b)||O&&h.isAncestor(y,R)&&L.isElement(b)&&!e.isVoid(b)&&!e.isInline(b))};for(var q of x.nodes({children:t},{pass:k}))k(q)&&$.push(q);var H=[],P=[],z=[],Y=!0,w=!1;for(var[N]of $)L.isElement(N)&&!e.isInline(N)?(Y=!1,w=!0,P.push(N)):Y?H.push(N):z.push(N);var[W]=s.nodes(e,{at:u,match:m=>j.isText(m)||s.isInline(e,m),mode:"highest",voids:a}),[,M]=W,ee=s.isStart(e,u,M),G=s.isEnd(e,u,M),re=s.pathRef(e,B&&!z.length?h.next(g):g),te=s.pathRef(e,G?h.next(M):M);F.splitNodes(e,{at:u,match:m=>w?L.isElement(m)&&s.isBlock(e,m):j.isText(m)||s.isInline(e,m),mode:w?"lowest":"highest",always:w&&(!p||H.length>0)&&(!B||z.length>0),voids:a});var ae=s.pathRef(e,!ee||ee&&G?h.next(M):M);if(F.insertNodes(e,H,{at:ae.current,match:m=>j.isText(m)||s.isInline(e,m),mode:"highest",voids:a}),C&&!H.length&&P.length&&!z.length&&F.delete(e,{at:g,voids:a}),F.insertNodes(e,P,{at:re.current,match:m=>L.isElement(m)&&s.isBlock(e,m),mode:"lowest",voids:a}),F.insertNodes(e,z,{at:te.current,match:m=>j.isText(m)||s.isInline(e,m),mode:"highest",voids:a}),!r.at){var oe;if(z.length>0&&te.current?oe=h.previous(te.current):P.length>0&&re.current?oe=h.previous(re.current):ae.current&&(oe=h.previous(ae.current)),oe){var ue=s.end(e,oe);F.select(e,ue)}}ae.unref(),re.unref(),te.unref()}}})},insertText(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.withoutNormalizing(e,()=>{var{voids:n=!1}=r,{at:a=e.selection}=r;if(a){if(h.isPath(a)&&(a=s.range(e,a)),E.isRange(a))if(E.isCollapsed(a))a=a.anchor;else{var u=E.end(a);if(!n&&s.void(e,{at:u}))return;var i=E.start(a),o=s.pointRef(e,i),l=s.pointRef(e,u);F.delete(e,{at:a,voids:n});var f=o.unref(),d=l.unref();a=f||d,F.setSelection(e,{anchor:a,focus:a})}if(!(!n&&s.void(e,{at:a}))){var{path:D,offset:v}=a;t.length>0&&e.apply({type:"insert_text",path:D,offset:v,text:t})}}})}};function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hn(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var F=It(It(It(It({},$i),Hi),Ki),Ui);function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var La=new WeakMap,Wa=new WeakMap;class rn{}class ur extends rn{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();var{offset:r,path:n}=t;this.offset=r,this.path=n}}class ir extends rn{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();var{offset:r,path:n}=t;this.offset=r,this.path=n}}var Gi=(e,t)=>{var r=e.text.length;La.set(e,[r,t])},Yi=e=>La.get(e),Xi=(e,t)=>{var r=e.text.length;Wa.set(e,[r,t])},Zi=e=>Wa.get(e);function Vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vn(Object(r),!0).forEach(function(n){Ia(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Vt=new WeakSet,sr=e=>{var t=[],r=a=>{if(a!=null){var u=t[t.length-1];if(typeof a=="string"){var i={text:a};Vt.add(i),a=i}if(j.isText(a)){var o=a;j.isText(u)&&Vt.has(u)&&Vt.has(o)&&j.equals(u,o,{loose:!0})?u.text+=o.text:t.push(o)}else if(L.isElement(a))t.push(a);else if(a instanceof rn){var l=t[t.length-1];j.isText(l)||(r(""),l=t[t.length-1]),a instanceof ur?Gi(l,a):a instanceof ir&&Xi(l,a)}else throw new Error("Unexpected hyperscript child object: ".concat(a))}};for(var n of e.flat(1/0))r(n);return t};function Ji(e,t,r){return new ur(t)}function Qi(e,t,r){return[new ur(t),new ir(t)]}function _a(e,t,r){return Tr(Tr({},t),{},{children:sr(r)})}function es(e,t,r){return new ir(t)}function ts(e,t,r){return sr(r)}function rs(e,t,r){var n=r.find(u=>u instanceof ur),a=r.find(u=>u instanceof ir);if(!n||n.offset==null||n.path==null)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||a.offset==null||a.path==null)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return Tr({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},t)}function ns(e,t,r){var n=sr(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(a==null&&(a={text:""}),!j.isText(a))throw new Error(`
    The <text> hyperscript tag can only contain text content as children.`);return Vt.delete(a),Object.assign(a,t),a}var as=e=>(t,r,n)=>{var a=[],u;for(var i of n)E.isRange(i)?u=i:a.push(i);var o=sr(a),l={},f=e();Object.assign(f,r),f.children=o;for(var[d,D]of x.texts(f)){var v=Yi(d),g=Zi(d);if(v!=null){var[p]=v;l.anchor={path:D,offset:p}}if(g!=null){var[B]=g;l.focus={path:D,offset:B}}}if(l.anchor&&!l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!l.anchor&&l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return u!=null?f.selection=u:E.isRange(l)&&(f.selection=l),f};function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kn(Object(r),!0).forEach(function(n){Ia(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var us={anchor:Ji,cursor:Qi,editor:as(Ma),element:_a,focus:es,fragment:ts,selection:rs,text:ns},is=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{elements:r={}}=t,n=os(r),a=At(At(At({},us),n),t.creators),u=ss(a);return u},ss=e=>{var t=function(n,a){for(var u=arguments.length,i=new Array(u>2?u-2:0),o=2;o<u;o++)i[o-2]=arguments[o];var l=e[n];if(!l)throw new Error("No hyperscript creator found for tag: <".concat(n,">"));a==null&&(a={}),De(a)||(i=[a].concat(i),a={}),i=i.filter(d=>Boolean(d)).flat();var f=l(n,a,i);return f};return t},os=e=>{var t={},r=function(u){var i=e[u];if(typeof i!="object")throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(u,">  tag you passed: ").concat(i));t[u]=(o,l,f)=>_a("element",At(At({},i),l),f)};for(var n in e)r(n);return t},pr=is(),$a=cs,za="---",qa="A-Za-z--------",ls=new RegExp("^[^"+qa+"]*["+za+"]"),fs=new RegExp("^[^"+za+"]*["+qa+"]");function cs(e){return e=String(e||""),ls.test(e)?"rtl":fs.test(e)?"ltr":"neutral"}function ds(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nn=ds,vs=typeof Mt=="object"&&Mt&&Mt.Object===Object&&Mt,Ds=vs,hs=Ds,gs=typeof self=="object"&&self&&self.Object===Object&&self,Cs=hs||gs||Function("return this")(),Ha=Cs,ps=Ha,ms=function(){return ps.Date.now()},Bs=ms,Es=/\s/;function As(e){for(var t=e.length;t--&&Es.test(e.charAt(t)););return t}var Fs=As,bs=Fs,ws=/^\s+/;function ys(e){return e&&e.slice(0,bs(e)+1).replace(ws,"")}var Os=ys,xs=Ha,ks=xs.Symbol,Va=ks,Un=Va,Ka=Object.prototype,Ss=Ka.hasOwnProperty,Ps=Ka.toString,mt=Un?Un.toStringTag:void 0;function Ts(e){var t=Ss.call(e,mt),r=e[mt];try{e[mt]=void 0;var n=!0}catch{}var a=Ps.call(e);return n&&(t?e[mt]=r:delete e[mt]),a}var Rs=Ts,Ms=Object.prototype,Ns=Ms.toString;function js(e){return Ns.call(e)}var Is=js,Gn=Va,Ls=Rs,Ws=Is,_s="[object Null]",$s="[object Undefined]",Yn=Gn?Gn.toStringTag:void 0;function zs(e){return e==null?e===void 0?$s:_s:Yn&&Yn in Object(e)?Ls(e):Ws(e)}var qs=zs;function Hs(e){return e!=null&&typeof e=="object"}var Vs=Hs,Ks=qs,Us=Vs,Gs="[object Symbol]";function Ys(e){return typeof e=="symbol"||Us(e)&&Ks(e)==Gs}var Xs=Ys,Zs=Os,Xn=nn,Js=Xs,Zn=0/0,Qs=/^[-+]0x[0-9a-f]+$/i,eo=/^0b[01]+$/i,to=/^0o[0-7]+$/i,ro=parseInt;function no(e){if(typeof e=="number")return e;if(Js(e))return Zn;if(Xn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Xn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zs(e);var r=eo.test(e);return r||to.test(e)?ro(e.slice(2),r?2:8):Qs.test(e)?Zn:+e}var ao=no,uo=nn,mr=Bs,Jn=ao,io="Expected a function",so=Math.max,oo=Math.min;function lo(e,t,r){var n,a,u,i,o,l,f=0,d=!1,D=!1,v=!0;if(typeof e!="function")throw new TypeError(io);t=Jn(t)||0,uo(r)&&(d=!!r.leading,D="maxWait"in r,u=D?so(Jn(r.maxWait)||0,t):u,v="trailing"in r?!!r.trailing:v);function g(k){var q=n,H=a;return n=a=void 0,f=k,i=e.apply(H,q),i}function p(k){return f=k,o=setTimeout(c,t),d?g(k):i}function B(k){var q=k-l,H=k-f,P=t-q;return D?oo(P,u-H):P}function C(k){var q=k-l,H=k-f;return l===void 0||q>=t||q<0||D&&H>=u}function c(){var k=mr();if(C(k))return O(k);o=setTimeout(c,B(k))}function O(k){return o=void 0,v&&n?g(k):(n=a=void 0,i)}function S(){o!==void 0&&clearTimeout(o),f=0,n=l=a=o=void 0}function R(){return o===void 0?i:O(mr())}function $(){var k=mr(),q=C(k);if(n=arguments,a=this,l=k,q){if(o===void 0)return p(l);if(D)return clearTimeout(o),o=setTimeout(c,t),g(l)}return o===void 0&&(o=setTimeout(c,t)),i}return $.cancel=S,$.flush=R,$}var Ua=lo,fo=Ua,co=nn,vo="Expected a function";function Do(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(vo);return co(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),fo(e,t,{leading:n,maxWait:t,trailing:a})}var ho=Do;function Qn(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function ea(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Br(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return ea(r.overflowY,t)||ea(r.overflowX,t)||function(n){var a=function(u){if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)}(e)}return!1}function Lt(e,t,r,n,a,u,i,o){return u<e&&i>t||u>e&&i<t?0:u<=e&&o<=r||i>=t&&o>=r?u-e-n:i>t&&o<r||u<e&&o>r?i-t+a:0}var ta=function(e,t){var r=window,n=t.scrollMode,a=t.block,u=t.inline,i=t.boundary,o=t.skipOverflowHiddenElements,l=typeof i=="function"?i:function(Be){return Be!==i};if(!Qn(e))throw new TypeError("Invalid target");for(var f,d,D=document.scrollingElement||document.documentElement,v=[],g=e;Qn(g)&&l(g);){if((g=(d=(f=g).parentElement)==null?f.getRootNode().host||null:d)===D){v.push(g);break}g!=null&&g===document.body&&Br(g)&&!Br(document.documentElement)||g!=null&&Br(g,o)&&v.push(g)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,B=r.visualViewport?r.visualViewport.height:innerHeight,C=window.scrollX||pageXOffset,c=window.scrollY||pageYOffset,O=e.getBoundingClientRect(),S=O.height,R=O.width,$=O.top,k=O.right,q=O.bottom,H=O.left,P=a==="start"||a==="nearest"?$:a==="end"?q:$+S/2,z=u==="center"?H+R/2:u==="end"?k:H,Y=[],w=0;w<v.length;w++){var N=v[w],W=N.getBoundingClientRect(),M=W.height,ee=W.width,G=W.top,re=W.right,te=W.bottom,ae=W.left;if(n==="if-needed"&&$>=0&&H>=0&&q<=B&&k<=p&&$>=G&&q<=te&&H>=ae&&k<=re)return Y;var oe=getComputedStyle(N),ue=parseInt(oe.borderLeftWidth,10),m=parseInt(oe.borderTopWidth,10),b=parseInt(oe.borderRightWidth,10),y=parseInt(oe.borderBottomWidth,10),_=0,K=0,Z="offsetWidth"in N?N.offsetWidth-N.clientWidth-ue-b:0,Q="offsetHeight"in N?N.offsetHeight-N.clientHeight-m-y:0,ne="offsetWidth"in N?N.offsetWidth===0?0:ee/N.offsetWidth:0,J="offsetHeight"in N?N.offsetHeight===0?0:M/N.offsetHeight:0;if(D===N)_=a==="start"?P:a==="end"?P-B:a==="nearest"?Lt(c,c+B,B,m,y,c+P,c+P+S,S):P-B/2,K=u==="start"?z:u==="center"?z-p/2:u==="end"?z-p:Lt(C,C+p,p,ue,b,C+z,C+z+R,R),_=Math.max(0,_+c),K=Math.max(0,K+C);else{_=a==="start"?P-G-m:a==="end"?P-te+y+Q:a==="nearest"?Lt(G,te,M,m,y+Q,P,P+S,S):P-(G+M/2)+Q/2,K=u==="start"?z-ae-ue:u==="center"?z-(ae+ee/2)+Z/2:u==="end"?z-re+b+Z:Lt(ae,re,ee,ue,b+Z,z,z+R,R);var le=N.scrollLeft,ce=N.scrollTop;P+=ce-(_=Math.max(0,Math.min(ce+_/J,N.scrollHeight-M/J+Q))),z+=le-(K=Math.max(0,Math.min(le+K/ne,N.scrollWidth-ee/ne+Z)))}Y.push({el:N,top:_,left:K})}return Y};function Ga(e){return e===Object(e)&&Object.keys(e).length!==0}function go(e,t){t===void 0&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach(function(n){var a=n.el,u=n.top,i=n.left;a.scroll&&r?a.scroll({top:u,left:i,behavior:t}):(a.scrollTop=u,a.scrollLeft=i)})}function Co(e){return e===!1?{block:"end",inline:"nearest"}:Ga(e)?e:{block:"start",inline:"nearest"}}function po(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Ga(t)&&typeof t.behavior=="function")return t.behavior(r?ta(e,t):[]);if(r){var n=Co(t);return go(ta(e,n),n.behavior)}}var tt=[],mo=function(){return tt.some(function(e){return e.activeTargets.length>0})},Bo=function(){return tt.some(function(e){return e.skippedTargets.length>0})},ra="ResizeObserver loop completed with undelivered notifications.",Eo=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:ra}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=ra),window.dispatchEvent(e)},xt;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(xt||(xt={}));var rt=function(e){return Object.freeze(e)},Ao=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,rt(this)}return e}(),Ya=function(){function e(t,r,n,a){return this.x=t,this.y=r,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,rt(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,a=t.top,u=t.right,i=t.bottom,o=t.left,l=t.width,f=t.height;return{x:r,y:n,top:a,right:u,bottom:i,left:o,width:l,height:f}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),an=function(e){return e instanceof SVGElement&&"getBBox"in e},Xa=function(e){if(an(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var a=e,u=a.offsetWidth,i=a.offsetHeight;return!(u||i||e.getClientRects().length)},na=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},Fo=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ft=typeof window<"u"?window:{},Wt=new WeakMap,aa=/auto|scroll/,bo=/^tb|vertical/,wo=/msie|trident/i.test(Ft.navigator&&Ft.navigator.userAgent),Re=function(e){return parseFloat(e||"0")},dt=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new Ao((r?t:e)||0,(r?e:t)||0)},ua=rt({devicePixelContentBoxSize:dt(),borderBoxSize:dt(),contentBoxSize:dt(),contentRect:new Ya(0,0,0,0)}),Za=function(e,t){if(t===void 0&&(t=!1),Wt.has(e)&&!t)return Wt.get(e);if(Xa(e))return Wt.set(e,ua),ua;var r=getComputedStyle(e),n=an(e)&&e.ownerSVGElement&&e.getBBox(),a=!wo&&r.boxSizing==="border-box",u=bo.test(r.writingMode||""),i=!n&&aa.test(r.overflowY||""),o=!n&&aa.test(r.overflowX||""),l=n?0:Re(r.paddingTop),f=n?0:Re(r.paddingRight),d=n?0:Re(r.paddingBottom),D=n?0:Re(r.paddingLeft),v=n?0:Re(r.borderTopWidth),g=n?0:Re(r.borderRightWidth),p=n?0:Re(r.borderBottomWidth),B=n?0:Re(r.borderLeftWidth),C=D+f,c=l+d,O=B+g,S=v+p,R=o?e.offsetHeight-S-e.clientHeight:0,$=i?e.offsetWidth-O-e.clientWidth:0,k=a?C+O:0,q=a?c+S:0,H=n?n.width:Re(r.width)-k-$,P=n?n.height:Re(r.height)-q-R,z=H+C+$+O,Y=P+c+R+S,w=rt({devicePixelContentBoxSize:dt(Math.round(H*devicePixelRatio),Math.round(P*devicePixelRatio),u),borderBoxSize:dt(z,Y,u),contentBoxSize:dt(H,P,u),contentRect:new Ya(D,l,H,P)});return Wt.set(e,w),w},Ja=function(e,t,r){var n=Za(e,r),a=n.borderBoxSize,u=n.contentBoxSize,i=n.devicePixelContentBoxSize;switch(t){case xt.DEVICE_PIXEL_CONTENT_BOX:return i;case xt.BORDER_BOX:return a;default:return u}},yo=function(){function e(t){var r=Za(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=rt([r.borderBoxSize]),this.contentBoxSize=rt([r.contentBoxSize]),this.devicePixelContentBoxSize=rt([r.devicePixelContentBoxSize])}return e}(),Qa=function(e){if(Xa(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},Oo=function(){var e=1/0,t=[];tt.forEach(function(i){if(i.activeTargets.length!==0){var o=[];i.activeTargets.forEach(function(f){var d=new yo(f.target),D=Qa(f.target);o.push(d),f.lastReportedSize=Ja(f.target,f.observedBox),D<e&&(e=D)}),t.push(function(){i.callback.call(i.observer,o,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var a=n[r];a()}return e},ia=function(e){tt.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(a){a.isActive()&&(Qa(a.target)>e?r.activeTargets.push(a):r.skippedTargets.push(a))})})},xo=function(){var e=0;for(ia(e);mo();)e=Oo(),ia(e);return Bo()&&Eo(),e>0},Er,eu=[],ko=function(){return eu.splice(0).forEach(function(e){return e()})},So=function(e){if(!Er){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return ko()}).observe(r,n),Er=function(){r.textContent="".concat(t?t--:t++)}}eu.push(e),Er()},Po=function(e){So(function(){requestAnimationFrame(e)})},Kt=0,To=function(){return!!Kt},Ro=250,Mo={attributes:!0,characterData:!0,childList:!0,subtree:!0},sa=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],oa=function(e){return e===void 0&&(e=0),Date.now()+e},Ar=!1,No=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Ro),!Ar){Ar=!0;var n=oa(t);Po(function(){var a=!1;try{a=xo()}finally{if(Ar=!1,t=n-oa(),!To())return;a?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Mo)};document.body?r():Ft.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),sa.forEach(function(r){return Ft.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),sa.forEach(function(r){return Ft.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),Rr=new No,la=function(e){!Kt&&e>0&&Rr.start(),Kt+=e,!Kt&&Rr.stop()},jo=function(e){return!an(e)&&!Fo(e)&&getComputedStyle(e).display==="inline"},Io=function(){function e(t,r){this.target=t,this.observedBox=r||xt.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Ja(this.target,this.observedBox,!0);return jo(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Lo=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),_t=new WeakMap,fa=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},$t=function(){function e(){}return e.connect=function(t,r){var n=new Lo(t,r);_t.set(t,n)},e.observe=function(t,r,n){var a=_t.get(t),u=a.observationTargets.length===0;fa(a.observationTargets,r)<0&&(u&&tt.push(a),a.observationTargets.push(new Io(r,n&&n.box)),la(1),Rr.schedule())},e.unobserve=function(t,r){var n=_t.get(t),a=fa(n.observationTargets,r),u=n.observationTargets.length===1;a>=0&&(u&&tt.splice(tt.indexOf(n),1),n.observationTargets.splice(a,1),la(-1))},e.disconnect=function(t){var r=this,n=_t.get(t);n.observationTargets.slice().forEach(function(a){return r.unobserve(t,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Wo=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");$t.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!na(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");$t.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!na(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");$t.unobserve(this,t)},e.prototype.disconnect=function(){$t.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function vt(e,t){if(e==null)return{};var r=_o(e,t),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var $o=0;class zo{constructor(){this.id="".concat($o++)}}var un=new WeakMap,sn=new WeakMap,tu=new WeakMap,Ut=new WeakMap,bt=new WeakMap,kt=new WeakMap,nt=new WeakMap,Mr=new WeakMap,lr=new WeakMap,Nr=new WeakMap,Qe=new WeakMap,et=new WeakMap,wt=new WeakMap,jr=new WeakMap,on=new WeakMap,Te=new WeakMap,Le=new WeakMap,Ee=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,tr=new WeakMap,Dt=Symbol("placeholder"),ru=Symbol("mark-placeholder"),qo=globalThis.Text,ln=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Ho=e=>it(e)&&e.nodeType===8,ye=e=>it(e)&&e.nodeType===1,it=e=>{var t=ln(e);return!!t&&e instanceof t.Node},Ir=e=>{var t=e&&e.anchorNode&&ln(e.anchorNode);return!!t&&e instanceof t.Selection},nu=e=>it(e)&&e.nodeType===3,Vo=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,Ko=e=>{var[t,r]=e;if(ye(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=au(t,a,n?"backward":"forward"),n=a<r;ye(t)&&t.childNodes.length;){var u=n?t.childNodes.length-1:0;t=Go(t,u,n?"backward":"forward")}r=n&&t.textContent!=null?t.textContent.length:0}return[t,r]},Uo=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},au=(e,t,r)=>{for(var{childNodes:n}=e,a=n[t],u=t,i=!1,o=!1;(Ho(a)||ye(a)&&a.childNodes.length===0||ye(a)&&a.getAttribute("contenteditable")==="false")&&!(i&&o);){if(u>=n.length){i=!0,u=t-1,r="backward";continue}if(u<0){o=!0,u=t+1,r="forward";continue}a=n[u],t=u,u+=r==="forward"?1:-1}return[a,t]},Go=(e,t,r)=>{var[n]=au(e,t,r);return n},uu=e=>{var t="";if(nu(e)&&e.nodeValue)return e.nodeValue;if(ye(e)){for(var r of Array.from(e.childNodes))t+=uu(r);var n=getComputedStyle(e).getPropertyValue("display");(n==="block"||n==="list"||e.tagName==="BR")&&(t+=`
`)}return t},Yo=/data-slate-fragment="(.+?)"/m,Xo=e=>{var t=e.getData("text/html"),[,r]=t.match(Yo)||[];return r},fn=(e,t,r)=>{var{target:n}=t;if(ye(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=A.getWindow(e);if(a.contains(n))return A.hasDOMNode(e,n,{editable:!0});var u=r.find(i=>{var{addedNodes:o,removedNodes:l}=i;for(var f of o)if(f===n||f.contains(n))return!0;for(var d of l)if(d===n||d.contains(n))return!0});return!u||u===t?!1:fn(e,u,r)},Zo=parseInt(V.version.split(".")[0],10)>=17,Jo=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ca=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Oe=typeof navigator<"u"&&/Android/.test(navigator.userAgent),rr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),zt=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Qo=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),iu=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),el=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),tl=Oe&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),rl=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),nl=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),al=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),Gt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ve=(!el||!tl)&&!Qo&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",A={isComposing(e){return!!et.get(e)},getWindow(e){var t=tu.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=Mr.get(t);return r||(r=new zo,Mr.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=sn.get(n);if(a==null){if(s.isEditor(n))return r;break}var u=un.get(n);if(u==null)break;r.unshift(u),n=a}throw new Error("Unable to find the path for Slate node: ".concat(he.stringify(t)))},findDocumentOrShadowRoot(e){var t=A.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:t.ownerDocument},isFocused(e){return!!Qe.get(e)},isReadOnly(e){return!!Nr.get(e)},blur(e){var t=A.toDOMNode(e,e),r=A.findDocumentOrShadowRoot(e);Qe.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=A.toDOMNode(e,e),r=A.findDocumentOrShadowRoot(e);Qe.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=A.findDocumentOrShadowRoot(e),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),t&&F.deselect(e)},hasDOMNode(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:n=!1}=r,a=A.toDOMNode(e,e),u;try{u=ye(t)?t:t.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return u?u.closest("[data-slate-editor]")===a&&(!n||u.isContentEditable?!0:typeof u.isContentEditable=="boolean"&&u.closest('[contenteditable="false"]')===a||!!u.getAttribute("data-slate-zero-width")):!1},insertData(e,t){e.insertData(t)},insertFragmentData(e,t){return e.insertFragmentData(t)},insertTextData(e,t){return e.insertTextData(t)},setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=lr.get(e),n=s.isEditor(t)?Ut.get(e):r==null?void 0:r.get(A.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(he.stringify(t)));return n},toDOMPoint(e,t){var[r]=s.node(e,t.path),n=A.toDOMNode(e,r),a;s.void(e,{at:t})&&(t={path:t.path,offset:0});for(var u="[data-slate-string], [data-slate-zero-width]",i=Array.from(n.querySelectorAll(u)),o=0,l=0;l<i.length;l++){var f=i[l],d=f.childNodes[0];if(!(d==null||d.textContent==null)){var{length:D}=d.textContent,v=f.getAttribute("data-slate-length"),g=v==null?D:parseInt(v,10),p=o+g,B=i[l+1];if(t.offset===p&&B!==null&&B!==void 0&&B.hasAttribute("data-slate-mark-placeholder")){var C,c=B.childNodes[0];a=[c instanceof qo?c:B,(C=B.textContent)!==null&&C!==void 0&&C.startsWith("\uFEFF")?1:0];break}if(t.offset<=p){var O=Math.min(D,Math.max(0,t.offset-o));a=[d,O];break}o=p}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(he.stringify(t)));return a},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=E.isBackward(t),u=A.toDOMPoint(e,r),i=E.isCollapsed(t)?u:A.toDOMPoint(e,n),o=A.getWindow(e),l=o.document.createRange(),[f,d]=a?i:u,[D,v]=a?u:i,g=ye(f)?f:f.parentElement,p=!!g.getAttribute("data-slate-zero-width"),B=ye(D)?D:D.parentElement,C=!!B.getAttribute("data-slate-zero-width");return l.setStart(f,p?1:d),l.setEnd(D,C?1:v),l},toSlateNode(e,t){var r=ye(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?kt.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var u=A.toSlateNode(e,t.target),i=A.findPath(e,u);if(L.isElement(u)&&s.isVoid(e,u)){var o=a.getBoundingClientRect(),l=e.isInline(u)?r-o.left<o.left+o.width-r:n-o.top<o.top+o.height-n,f=s.point(e,i,{edge:l?"start":"end"}),d=l?s.before(e,f):s.after(e,f);if(d){var D=s.range(e,d);return D}}var v,{document:g}=A.getWindow(e);if(g.caretRangeFromPoint)v=g.caretRangeFromPoint(r,n);else{var p=g.caretPositionFromPoint(r,n);p&&(v=g.createRange(),v.setStart(p.offsetNode,p.offset),v.setEnd(p.offsetNode,p.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var B=A.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return B},toSlatePoint(e,t,r){var{exactMatch:n,suppressThrow:a}=r,[u,i]=n?t:Ko(t),o=u.parentNode,l=null,f=0;if(o){var d,D,v=A.toDOMNode(e,e),g=o.closest('[data-slate-void="true"]'),p=g&&v.contains(g)?g:null,B=o.closest("[data-slate-leaf]"),C=null;if(B){if(l=B.closest('[data-slate-node="text"]'),l){var c=A.getWindow(e),O=c.document.createRange();O.setStart(l,0),O.setEnd(u,i);var S=O.cloneContents(),R=[...Array.prototype.slice.call(S.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(S.querySelectorAll("[contenteditable=false]"))];R.forEach(W=>{if(Oe&&!n&&W.hasAttribute("data-slate-zero-width")&&W.textContent.length>0&&W.textContext!=="\uFEFF"){W.textContent.startsWith("\uFEFF")&&(W.textContent=W.textContent.slice(1));return}W.parentNode.removeChild(W)}),f=S.textContent.length,C=l}}else if(p){for(var $=p.querySelectorAll("[data-slate-leaf]"),k=0;k<$.length;k++){var q=$[k];if(A.hasDOMNode(e,q)){B=q;break}}B?(l=B.closest('[data-slate-node="text"]'),C=B,f=C.textContent.length,C.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})):f=1}C&&f===C.textContent.length&&Oe&&C.getAttribute("data-slate-zero-width")==="z"&&(d=C.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(o.hasAttribute("data-slate-zero-width")||rr&&(D=C.textContent)!==null&&D!==void 0&&D.endsWith(`

`))&&f--}if(Oe&&!l&&!n){var H=o.hasAttribute("data-slate-node")?o:o.closest("[data-slate-node]");if(H&&A.hasDOMNode(e,H,{editable:!0})){var P=A.toSlateNode(e,H),{path:z,offset:Y}=s.start(e,A.findPath(e,P));return H.querySelector("[data-slate-leaf]")||(Y=i),{path:z,offset:Y}}}if(!l){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var w=A.toSlateNode(e,l),N=A.findPath(e,w);return{path:N,offset:f}},toSlateRange(e,t,r){var{exactMatch:n,suppressThrow:a}=r,u=Ir(t)?t.anchorNode:t.startContainer,i,o,l,f,d;if(u&&(Ir(t)?(i=t.anchorNode,o=t.anchorOffset,l=t.focusNode,f=t.focusOffset,iu&&Uo(i)?d=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:d=t.isCollapsed):(i=t.startContainer,o=t.startOffset,l=t.endContainer,f=t.endOffset,d=t.collapsed)),i==null||l==null||o==null||f==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));if("getAttribute"in l&&l.getAttribute("contenteditable")==="false"){var D;l=i,f=((D=i.textContent)===null||D===void 0?void 0:D.length)||0}var v=A.toSlatePoint(e,[i,o],{exactMatch:n,suppressThrow:a});if(!v)return null;var g=d?v:A.toSlatePoint(e,[l,f],{exactMatch:n,suppressThrow:a});if(!g)return null;if(rr&&!d&&i!==l){var p=s.isEnd(e,v,v.path),B=s.isStart(e,g,g.path);if(p){var C=s.after(e,v);v=C||v}if(B){var c=s.before(e,g);g=c||g}}var O={anchor:v,focus:g};return E.isExpanded(O)&&E.isForward(O)&&ye(l)&&s.void(e,{at:O.focus,mode:"highest"})&&(O=s.unhangRange(e,O,{voids:!0})),O},hasRange(e,t){var{anchor:r,focus:n}=t;return s.hasPath(e,r.path)&&s.hasPath(e,n.path)},hasTarget(e,t){return it(t)&&A.hasDOMNode(e,t)},hasEditableTarget(e,t){return it(t)&&A.hasDOMNode(e,t,{editable:!0})},hasSelectableTarget(e,t){return A.hasEditableTarget(e,t)||A.isTargetInsideNonReadonlyVoid(e,t)},isTargetInsideNonReadonlyVoid(e,t){if(Nr.get(e))return!1;var r=A.hasTarget(e,t)&&A.toSlateNode(e,t);return L.isElement(r)&&s.isVoid(e,r)},androidScheduleFlush(e){var t;(t=on.get(e))===null||t===void 0||t()},androidPendingDiffs(e){return Ee.get(e)}},ul=["anchor","focus"],il=["anchor","focus"],sl=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),su=(e,t)=>{var r=vt(e,ul),n=vt(t,il);return e[Dt]===t[Dt]&&sl(r,n)},ol=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!E.equals(n,a)||!su(n,a))return!1}return!0},ll=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!su(n,a))return!1}return!0},St=Gt?T.useLayoutEffect:T.useEffect,fl=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,u=je(),i=A.findPath(u,a),o=h.parent(i),l=r[ru]===!0;return u.isVoid(n)?V.createElement(Fr,{length:x.string(n).length}):r.text===""&&n.children[n.children.length-1]===a&&!u.isInline(n)&&s.string(u,o)===""?V.createElement(Fr,{isLineBreak:!0,isMarkPlaceholder:l}):r.text===""?V.createElement(Fr,{isMarkPlaceholder:l}):t&&r.text.slice(-1)===`
`?V.createElement(da,{isTrailing:!0,text:r.text}):V.createElement(da,{text:r.text})},da=e=>{var{text:t,isTrailing:r=!1}=e,n=T.useRef(null),a=()=>"".concat(t??"").concat(r?`
`:""),[u]=T.useState(a);return St(()=>{var i=a();n.current&&n.current.textContent!==i&&(n.current.textContent=i)}),V.createElement(cl,{ref:n},u)},cl=T.memo(T.forwardRef((e,t)=>V.createElement("span",{"data-slate-string":!0,ref:t},e.children))),Fr=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),V.createElement("span",Object.assign({},a),!Oe||!r?"\uFEFF":null,r?V.createElement("br",null):null)},cn=T.createContext(null),je=()=>{var e=T.useContext(cn);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},dl=e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:u,renderLeaf:i=p=>V.createElement(Dl,Object.assign({},p))}=e,o=T.useRef(null),l=T.useRef(null),f=je(),d=T.useRef(null);T.useEffect(()=>()=>{d.current&&d.current.disconnect()},[]),T.useEffect(()=>{var p=l==null?void 0:l.current;if(p?bt.set(f,p):bt.delete(f),d.current)d.current.disconnect(),p&&d.current.observe(p);else if(p){var B=window.ResizeObserver||Wo;d.current=new B(()=>{var c=tr.get(f);c==null||c()}),d.current.observe(p)}if(!p&&o.current){var C=tr.get(f);C==null||C()}return o.current=l.current,()=>{bt.delete(f)}},[l,t]);var D=V.createElement(fl,{isLast:r,leaf:t,parent:a,text:n});if(t[Dt]){var v={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:l}};D=V.createElement(V.Fragment,null,u(v),D)}var g={"data-slate-leaf":!0};return i({attributes:g,children:D,leaf:t,text:n})},vl=V.memo(dl,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&j.equals(t.leaf,e.leaf)&&t.leaf[Dt]===e.leaf[Dt]),Dl=e=>{var{attributes:t,children:r}=e;return V.createElement("span",Object.assign({},t),r)},hl=e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:u,text:i}=e,o=je(),l=T.useRef(null),f=j.decorations(i,t),d=A.findKey(o,i),D=[],v=0;v<f.length;v++){var g=f[v];D.push(V.createElement(vl,{isLast:r&&v===f.length-1,key:"".concat(d.id,"-").concat(v),renderPlaceholder:a,leaf:g,text:i,parent:n,renderLeaf:u}))}var p=T.useCallback(B=>{var C=lr.get(o);B?(C==null||C.set(d,B),nt.set(i,B),kt.set(B,i)):(C==null||C.delete(d),nt.delete(i),l.current&&kt.delete(l.current)),l.current=B},[l,o,d,i]);return V.createElement("span",{"data-slate-node":"text",ref:p},D)},ou=V.memo(hl,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ll(t.decorations,e.decorations)),gl=e=>{var{decorations:t,element:r,renderElement:n=O=>V.createElement(pl,Object.assign({},O)),renderPlaceholder:a,renderLeaf:u,selection:i}=e,o=je(),l=El(),f=o.isInline(r),d=A.findKey(o,r),D=T.useCallback(O=>{var S=lr.get(o);O?(S==null||S.set(d,O),nt.set(r,O),kt.set(O,r)):(S==null||S.delete(d),nt.delete(r))},[o,d,r]),v=cu({decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:i}),g={"data-slate-node":"element",ref:D};if(f&&(g["data-slate-inline"]=!0),!f&&s.hasInlines(o,r)){var p=x.string(r),B=$a(p);B==="rtl"&&(g.dir=B)}if(s.isVoid(o,r)){g["data-slate-void"]=!0,!l&&f&&(g.contentEditable=!1);var C=f?"span":"div",[[c]]=x.texts(r);v=V.createElement(C,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},V.createElement(ou,{renderPlaceholder:a,decorations:[],isLast:!1,parent:r,text:c})),un.set(c,0),sn.set(c,r)}return n({attributes:g,children:v,element:r})},Cl=V.memo(gl,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&ol(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&E.equals(e.selection,t.selection))),pl=e=>{var{attributes:t,children:r,element:n}=e,a=je(),u=a.isInline(n)?"span":"div";return V.createElement(u,Object.assign({},t,{style:{position:"relative"}}),r)},lu=T.createContext(()=>[]),ml=()=>T.useContext(lu),fu=T.createContext(!1),Bl=()=>T.useContext(fu),cu=e=>{for(var{decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:i}=e,o=ml(),l=je(),f=A.findPath(l,r),d=[],D=L.isElement(r)&&!l.isInline(r)&&s.hasInlines(l,r),v=0;v<r.children.length;v++){var g=f.concat(v),p=r.children[v],B=A.findKey(l,p),C=s.range(l,g),c=i&&E.intersection(C,i),O=o([p,g]);for(var S of t){var R=E.intersection(S,C);R&&O.push(R)}L.isElement(p)?d.push(V.createElement(fu.Provider,{key:"provider-".concat(B.id),value:!!c},V.createElement(Cl,{decorations:O,element:p,key:B.id,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:c}))):d.push(V.createElement(ou,{decorations:O,key:B.id,isLast:D&&v===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:u,text:p})),un.set(p,v),sn.set(p,r)}return d},du=T.createContext(!1),El=()=>T.useContext(du),vu=T.createContext(null),Pt=()=>{var e=T.useContext(vu);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},Al=3,Fl={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},bl={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},wl={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},se=e=>{var t=Fl[e],r=bl[e],n=wl[e],a=t&&dr(t),u=r&&dr(r),i=n&&dr(n);return o=>!!(a&&a(o)||ca&&u&&u(o)||!ca&&i&&i(o))},fe={isBold:se("bold"),isCompose:se("compose"),isMoveBackward:se("moveBackward"),isMoveForward:se("moveForward"),isDeleteBackward:se("deleteBackward"),isDeleteForward:se("deleteForward"),isDeleteLineBackward:se("deleteLineBackward"),isDeleteLineForward:se("deleteLineForward"),isDeleteWordBackward:se("deleteWordBackward"),isDeleteWordForward:se("deleteWordForward"),isExtendBackward:se("extendBackward"),isExtendForward:se("extendForward"),isExtendLineBackward:se("extendLineBackward"),isExtendLineForward:se("extendLineForward"),isItalic:se("italic"),isMoveLineBackward:se("moveLineBackward"),isMoveLineForward:se("moveLineForward"),isMoveWordBackward:se("moveWordBackward"),isMoveWordForward:se("moveWordForward"),isRedo:se("redo"),isSoftBreak:se("insertSoftBreak"),isSplitBlock:se("splitBlock"),isTransposeCharacter:se("transposeCharacter"),isUndo:se("undo")},yl=(e,t)=>{var r=[],n=()=>{r=[]},a=i=>{if(t.current){var o=i.filter(l=>fn(e,l,i));r.push(...o)}};function u(){r.length>0&&(r.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(o=>{i.target.insertBefore(o,i.nextSibling)}),i.addedNodes.forEach(o=>{i.target.removeChild(o)}))}),n())}return{registerMutations:a,restoreDOM:u,clear:n}},Ol={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Du extends T.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var t,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(r.current,Ol)}componentDidMount(){var{receivedUserInput:t}=this.props,r=this.context;this.manager=yl(r,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,r,n,a=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(a!=null&&a.length){var u;(u=this.manager)===null||u===void 0||u.registerMutations(a)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}Du.contextType=cn;var xl=Oe?Du:e=>{var{children:t}=e;return V.createElement(V.Fragment,null,t)};function kl(e,t){var{path:r,diff:n}=t;if(!s.hasPath(e,r))return!1;var a=x.get(e,r);if(!j.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var u=h.next(r);if(!s.hasPath(e,u))return!1;var i=x.get(e,u);return j.isText(i)&&i.text.startsWith(n.text)}function hu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((a,u)=>a.slice(0,u.start)+u.text+a.slice(u.end),e)}function Sl(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}function Pl(e,t,r){for(var n=Math.min(e.length,t.length,r),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return n}function gu(e,t){var{start:r,end:n,text:a}=t,u=e.slice(r,n),i=Sl(u,a),o=Math.min(u.length-i,a.length-i),l=Pl(u,a,o),f={start:r+i,end:n-l,text:a.slice(i,a.length-l)};return f.start===f.end&&f.text.length===0?null:f}function Tl(e,t,r){var n=Math.min(t.start,r.start),a=Math.max(0,Math.min(t.start+t.text.length,r.end)-r.start),u=hu(e,t,r),i=Math.max(r.start+r.text.length,t.start+t.text.length+(t.start+t.text.length>r.start?r.text.length:0)-a),o=u.slice(n,i),l=Math.max(t.end,r.end-t.text.length+(t.end-t.start));return gu(e,{start:n,end:l,text:o})}function Rl(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}function Lr(e,t){var{path:r,offset:n}=t;if(!s.hasPath(e,r))return null;var a=x.get(e,r);if(!j.isText(a))return null;var u=s.above(e,{match:o=>L.isElement(o)&&s.isBlock(e,o),at:r});if(!u)return null;for(;n>a.text.length;){var i=s.next(e,{at:r,match:j.isText});if(!i||!h.isDescendant(i[1],u[1]))return null;n-=a.text.length,a=i[0],r=i[1]}return{path:r,offset:n}}function va(e,t){var r=Lr(e,t.anchor);if(!r)return null;if(E.isCollapsed(t))return{anchor:r,focus:r};var n=Lr(e,t.focus);return n?{anchor:r,focus:n}:null}function Wr(e,t,r){var n=Ee.get(e),a=n==null?void 0:n.find(d=>{var{path:D}=d;return h.equals(D,t.path)});if(!a||t.offset<=a.diff.start)return X.transform(t,r,{affinity:"backward"});var{diff:u}=a;if(t.offset<=u.start+u.text.length){var i={path:t.path,offset:u.start},o=X.transform(i,r,{affinity:"backward"});return o?{path:o.path,offset:o.offset+t.offset-u.start}:null}var l={path:t.path,offset:t.offset-u.text.length+u.end-u.start},f=X.transform(l,r,{affinity:"backward"});return f?r.type==="split_node"&&h.equals(r.path,t.path)&&l.offset<r.position&&u.start<r.position?f:{path:f.path,offset:f.offset+u.text.length-u.end+u.start}:null}function Da(e,t,r){var n=Wr(e,t.anchor,r);if(!n)return null;if(E.isCollapsed(t))return{anchor:n,focus:n};var a=Wr(e,t.focus,r);return a?{anchor:n,focus:a}:null}function Ml(e,t){var{path:r,diff:n,id:a}=e;switch(t.type){case"insert_text":return!h.equals(t.path,r)||t.offset>=n.end?e:t.offset<=n.start?{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:a,path:r};case"remove_text":return!h.equals(t.path,r)||t.offset>=n.end?e:t.offset+t.text.length<=n.start?{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:a,path:r};case"split_node":return!h.equals(t.path,r)||t.position>=n.end?{diff:n,id:a,path:h.transform(r,t,{affinity:"backward"})}:t.position>n.start?{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:a,path:r}:{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:a,path:h.transform(r,t,{affinity:"forward"})};case"merge_node":return h.equals(t.path,r)?{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:a,path:h.transform(r,t)}:{diff:n,id:a,path:h.transform(r,t)}}var u=h.transform(r,t);return u?{diff:n,path:u,id:a}:null}function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ha(Object(r),!0).forEach(function(n){or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Nl=25,jl=200,Il=function(){},Ll=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function Wl(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,u=null,i=null,o=null,l=0,f=!1,d=()=>{var w=Ge.get(t);if(Ge.delete(t),w){var{selection:N}=t,W=va(t,w);W&&(!N||!E.equals(W,N))&&F.select(t,W)}},D=()=>{var w=Ue.get(t);if(Ue.delete(t),!!w){if(w.at){var N=X.isPoint(w.at)?Lr(t,w.at):va(t,w.at);if(!N)return;var W=s.range(t,N);(!t.selection||!E.equals(t.selection,W))&&F.select(t,N)}w.run()}},v=()=>{if(i&&(clearTimeout(i),i=null),o&&(clearTimeout(o),o=null),!R()&&!S()){d();return}a||(a=!0,setTimeout(()=>a=!1)),S()&&(a="action");var w=t.selection&&s.rangeRef(t,t.selection,{affinity:"forward"});Le.set(t,t.marks),Il("flush",Ue.get(t),Ee.get(t));for(var N=R(),W;W=(M=Ee.get(t))===null||M===void 0?void 0:M[0];){var M,ee,G=Te.get(t);G!==void 0&&(Te.delete(t),t.marks=G),G&&f===!1&&(f=null);var re=Rl(W);(!t.selection||!E.equals(t.selection,re))&&F.select(t,re),W.diff.text?s.insertText(t,W.diff.text):s.deleteFragment(t),Ee.set(t,(ee=Ee.get(t))===null||ee===void 0?void 0:ee.filter(oe=>{var{id:ue}=oe;return ue!==W.id})),kl(t,W)||(N=!1,Ue.delete(t),Le.delete(t),a="action",Ge.delete(t),r.cancel(),n.cancel(),w==null||w.unref())}var te=w==null?void 0:w.unref();if(te&&!Ge.get(t)&&(!t.selection||!E.equals(te,t.selection))&&F.select(t,te),S()){D();return}N&&r(),r.flush(),n.flush(),d();var ae=Le.get(t);Le.delete(t),ae!==void 0&&(t.marks=ae,t.onChange())},g=w=>{u&&clearTimeout(u),u=setTimeout(()=>{et.set(t,!1),v()},Nl)},p=w=>{et.set(t,!0),u&&(clearTimeout(u),u=null)},B=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,W=bt.get(t);if(W){if(R()||N){W.style.display="none";return}W.style.removeProperty("display")}},C=(w,N)=>{var W,M=(W=Ee.get(t))!==null&&W!==void 0?W:[];Ee.set(t,M);var ee=x.leaf(t,w),G=M.findIndex(ae=>h.equals(ae.path,w));if(G<0){var re=gu(ee.text,N);re&&M.push({path:w,diff:N,id:l++}),B();return}var te=Tl(ee.text,M[G].diff,N);if(!te){M.splice(G,1),B();return}M[G]=qt(qt({},M[G]),{},{diff:te})},c=function(N){var{at:W}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f=!1,Ge.delete(t),r.cancel(),n.cancel(),S()&&v(),Ue.set(t,{at:W,run:N}),o=setTimeout(v)},O=w=>{var N;i&&(clearTimeout(i),i=null);var{inputType:W}=w,M=null,ee=w.dataTransfer||w.data||void 0;f!==!1&&W!=="insertText"&&W!=="insertCompositionText"&&(f=!1);var[G]=w.getTargetRanges();G&&(M=A.toSlateRange(t,G,{exactMatch:!1,suppressThrow:!0}));var re=A.getWindow(t),te=re.getSelection();if(!M&&te&&(G=te,M=A.toSlateRange(t,te,{exactMatch:!1,suppressThrow:!0})),M=(N=M)!==null&&N!==void 0?N:t.selection,!!M){var ae=!0;if(W.startsWith("delete")){if(E.isExpanded(M)){var[oe,ue]=E.edges(M),m=x.leaf(t,oe.path);if(m.text.length===oe.offset&&ue.offset===0){var b=s.next(t,{at:oe.path,match:j.isText});b&&h.equals(b[1],ue.path)&&(M={anchor:ue,focus:ue})}}var y=W.endsWith("Backward")?"backward":"forward",[_,K]=E.edges(M),[Z,Q]=s.leaf(t,_.path),ne={text:"",start:_.offset,end:K.offset},J=Ee.get(t),le=J==null?void 0:J.find(Se=>h.equals(Se.path,Q)),ce=le?[le.diff,ne]:[ne],Be=hu(Z.text,...ce);if(Be.length===0&&(ae=!1),E.isExpanded(M)){if(ae&&h.equals(M.anchor.path,M.focus.path)){var Ce={path:M.anchor.path,offset:_.offset},Fe=s.range(t,Ce,Ce);return q(Fe),C(M.anchor.path,{text:"",end:K.offset,start:_.offset})}return c(()=>s.deleteFragment(t,{direction:y}),{at:M})}}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return c(()=>s.deleteFragment(t),{at:M});case"deleteContent":case"deleteContentForward":{var{anchor:pe}=M;if(ae&&E.isCollapsed(M)){var xe=x.leaf(t,pe.path);if(pe.offset<xe.text.length)return C(pe.path,{text:"",start:pe.offset,end:pe.offset+1})}return c(()=>s.deleteForward(t),{at:M})}case"deleteContentBackward":{var ve,{anchor:ke}=M,$e=Ir(G)?G.isCollapsed:!!((ve=G)!==null&&ve!==void 0&&ve.collapsed);return ae&&$e&&E.isCollapsed(M)&&ke.offset>0?C(ke.path,{text:"",start:ke.offset-1,end:ke.offset}):c(()=>s.deleteBackward(t),{at:M})}case"deleteEntireSoftLine":return c(()=>{s.deleteBackward(t,{unit:"line"}),s.deleteForward(t,{unit:"line"})},{at:M});case"deleteHardLineBackward":return c(()=>s.deleteBackward(t,{unit:"block"}),{at:M});case"deleteSoftLineBackward":return c(()=>s.deleteBackward(t,{unit:"line"}),{at:M});case"deleteHardLineForward":return c(()=>s.deleteForward(t,{unit:"block"}),{at:M});case"deleteSoftLineForward":return c(()=>s.deleteForward(t,{unit:"line"}),{at:M});case"deleteWordBackward":return c(()=>s.deleteBackward(t,{unit:"word"}),{at:M});case"deleteWordForward":return c(()=>s.deleteForward(t,{unit:"word"}),{at:M});case"insertLineBreak":return c(()=>s.insertSoftBreak(t),{at:M});case"insertParagraph":return c(()=>s.insertBreak(t),{at:M});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Ll(ee))return c(()=>A.insertData(t,ee),{at:M});var de=ee??"";if(Te.get(t)&&(de=de.replace("\uFEFF","")),W==="insertText"&&/.*\n.*\n$/.test(de)&&(de=de.slice(0,-1)),de.includes(`
`))return c(()=>{var Se=de.split(`
`);Se.forEach((Xe,Rt)=>{Xe&&s.insertText(t,Xe),Rt!==Se.length-1&&s.insertSoftBreak(t)})},{at:M});if(h.equals(M.anchor.path,M.focus.path)){var[ze,qe]=E.edges(M),ge={start:ze.offset,end:qe.offset,text:de};if(de&&f&&W==="insertCompositionText"){var He=f.start+f.text.search(/\S|$/),Tt=ge.start+ge.text.search(/\S|$/);Tt===He+1&&ge.end===f.start+f.text.length?(ge.start-=1,f=null,z()):f=!1}else W==="insertText"?f===null?f=ge:f&&E.isCollapsed(M)&&f.end+f.text.length===ze.offset?f=qt(qt({},f),{},{text:f.text+de}):f=!1:f=!1;if(ae){C(ze.path,ge);return}}return c(()=>s.insertText(t,de),{at:M})}}}},S=()=>!!Ue.get(t),R=()=>{var w;return!!((w=Ee.get(t))!==null&&w!==void 0&&w.length)},$=()=>S()||R(),k=()=>a,q=w=>{Ge.set(t,w),i&&(clearTimeout(i),i=null);var{selection:N}=t;if(w){var W=!N||!h.equals(N.anchor.path,w.anchor.path),M=!N||!h.equals(N.anchor.path.slice(0,-1),w.anchor.path.slice(0,-1));(W&&f||M)&&(f=!1),(W||R())&&(i=setTimeout(v,jl))}},H=()=>{(S()||!R())&&v()},P=w=>{R()||(B(!0),setTimeout(B))},z=()=>{S()||(o=setTimeout(v))},Y=w=>{if(!(R()||S())&&w.some(W=>fn(t,W,w))){var N;(N=tr.get(t))===null||N===void 0||N()}};return{flush:v,scheduleFlush:z,hasPendingDiffs:R,hasPendingAction:S,hasPendingChanges:$,isFlushing:k,handleUserSelect:q,handleCompositionEnd:g,handleCompositionStart:p,handleDOMBeforeInput:O,handleKeyDown:P,handleDomMutations:Y,handleInput:H}}function _l(){var e=T.useRef(!1);return T.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}function $l(e,t,r){var[n]=T.useState(()=>new MutationObserver(t));St(()=>{n.takeRecords()}),T.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[])}var zl=["node"];function ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ga(Object(r),!0).forEach(function(n){or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ga(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Hl={subtree:!0,childList:!0,characterData:!0};function Vl(e){var{node:t}=e,r=vt(e,zl);if(!Oe)return null;var n=je(),a=_l(),[u]=T.useState(()=>Wl(ql({editor:n},r)));return $l(t,u.handleDomMutations,Hl),on.set(n,u.scheduleFlush),a&&u.flush(),u}function Kl(){var e=je(),t=T.useRef(!1),r=T.useRef(0),n=T.useCallback(()=>{if(!t.current){t.current=!0;var a=A.getWindow(e);a.cancelAnimationFrame(r.current),r.current=a.requestAnimationFrame(()=>{t.current=!1})}},[]);return T.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:t,onUserInput:n}}var Ul=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Gl=["text"];function Ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ca(Object(r),!0).forEach(function(n){or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Yl=e=>V.createElement(V.Fragment,null,cu(e)),Xl=e=>{var t,r,n=T.useCallback(m=>V.createElement(Zl,Object.assign({},m)),[]),{autoFocus:a,decorate:u=Jl,onDOMBeforeInput:i,placeholder:o,readOnly:l=!1,renderElement:f,renderLeaf:d,renderPlaceholder:D=n,scrollSelectionIntoView:v=Ql,style:g={},as:p="div",disableDefaultStyles:B=!1}=e,C=vt(e,Ul),c=Pt(),[O,S]=T.useState(!1),R=T.useRef(null),$=T.useRef([]),{onUserInput:k,receivedUserInput:q}=Kl(),[,H]=T.useReducer(m=>m+1,0);tr.set(c,H),Nr.set(c,l);var P=T.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);T.useEffect(()=>{R.current&&a&&R.current.focus()},[a]);var z=T.useCallback(ho(()=>{if((Oe||!A.isComposing(c))&&(!P.isUpdatingSelection||w!=null&&w.isFlushing())&&!P.isDraggingInternally){var m=A.findDocumentOrShadowRoot(c),{activeElement:b}=m,y=A.toDOMNode(c,c),_=m.getSelection();if(b===y?(P.latestElement=b,Qe.set(c,!0)):Qe.delete(c),!_)return F.deselect(c);var{anchorNode:K,focusNode:Z}=_,Q=A.hasEditableTarget(c,K)||A.isTargetInsideNonReadonlyVoid(c,K),ne=A.hasEditableTarget(c,Z)||A.isTargetInsideNonReadonlyVoid(c,Z);if(Q&&ne){var J=A.toSlateRange(c,_,{exactMatch:!1,suppressThrow:!0});J&&(!A.isComposing(c)&&!(w!=null&&w.hasPendingChanges())&&!(w!=null&&w.isFlushing())?F.select(c,J):w==null||w.handleUserSelect(J))}l&&(!Q||!ne)&&F.deselect(c)}},100),[l]),Y=T.useMemo(()=>Ua(z,0),[z]),w=Vl({node:R,onDOMSelectionChange:z,scheduleOnDOMSelectionChange:Y});St(()=>{var m;R.current&&(m=ln(R.current))?(tu.set(c,m),Ut.set(c,R.current),nt.set(c,R.current),kt.set(R.current,c)):nt.delete(c);var{selection:b}=c,y=A.findDocumentOrShadowRoot(c),_=y.getSelection();if(!(!_||!A.isFocused(c)||w!=null&&w.hasPendingAction())){var K=le=>{var ce=_.type!=="None";if(!(!b&&!ce)){var Be=Ut.get(c),Ce=!1;if(Be.contains(_.anchorNode)&&Be.contains(_.focusNode)&&(Ce=!0),ce&&Ce&&b&&!le){var Fe=A.toSlateRange(c,_,{exactMatch:!0,suppressThrow:!0});if(Fe&&E.equals(Fe,b)){var pe;if(!P.hasMarkPlaceholder)return;var{anchorNode:xe}=_;if(xe!=null&&(pe=xe.parentElement)!==null&&pe!==void 0&&pe.hasAttribute("data-slate-mark-placeholder"))return}}if(b&&!A.hasRange(c,b)){c.selection=A.toSlateRange(c,_,{exactMatch:!1,suppressThrow:!0});return}P.isUpdatingSelection=!0;var ve=b&&A.toDOMRange(c,b);return ve?(E.isBackward(b)?_.setBaseAndExtent(ve.endContainer,ve.endOffset,ve.startContainer,ve.startOffset):_.setBaseAndExtent(ve.startContainer,ve.startOffset,ve.endContainer,ve.endOffset),v(c,ve)):_.removeAllRanges(),ve}},Z=K(),Q=(w==null?void 0:w.isFlushing())==="action";if(!Oe||!Q){setTimeout(()=>{if(Z&&rr){var le=A.toDOMNode(c,c);le.focus()}P.isUpdatingSelection=!1});return}var ne=null,J=requestAnimationFrame(()=>{if(Q){var le=ce=>{try{var Be=A.toDOMNode(c,c);Be.focus(),K(ce)}catch{}};le(),ne=setTimeout(()=>{le(!0),P.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(J),ne&&clearTimeout(ne)}}});var N=T.useCallback(m=>{if(k(),!l&&A.hasEditableTarget(c,m.target)&&!ef(m,i)){var b;if(w)return w.handleDOMBeforeInput(m);Y.flush(),z.flush();var{selection:y}=c,{inputType:_}=m,K=m.dataTransfer||m.data||void 0,Z=_==="insertCompositionText"||_==="deleteCompositionText";if(Z&&A.isComposing(c))return;var Q=!1;if(_==="insertText"&&y&&E.isCollapsed(y)&&m.data&&m.data.length===1&&/[a-z ]/i.test(m.data)&&y.anchor.offset!==0){var ne,J;Q=!0,c.marks&&(Q=!1);var{anchor:le}=y,[ce,Be]=A.toDOMPoint(c,le),Ce=(ne=ce.parentElement)===null||ne===void 0?void 0:ne.closest("a"),Fe=A.getWindow(c);if(Q&&Ce&&A.hasDOMNode(c,Ce)){var pe,xe=Fe==null?void 0:Fe.document.createTreeWalker(Ce,NodeFilter.SHOW_TEXT).lastChild();xe===ce&&((pe=xe.textContent)===null||pe===void 0?void 0:pe.length)===Be&&(Q=!1)}if(Q&&ce.parentElement&&(Fe==null||(J=Fe.getComputedStyle(ce.parentElement))===null||J===void 0?void 0:J.whiteSpace)==="pre"){var ve=s.above(c,{at:le.path,match:ge=>L.isElement(ge)&&s.isBlock(c,ge)});ve&&x.string(ve[0]).includes("	")&&(Q=!1)}}if(!_.startsWith("delete")||_.startsWith("deleteBy")){var[ke]=m.getTargetRanges();if(ke){var $e=A.toSlateRange(c,ke,{exactMatch:!1,suppressThrow:!1});if(!y||!E.equals(y,$e)){Q=!1;var de=!Z&&c.selection&&s.rangeRef(c,c.selection);F.select(c,$e),de&&wt.set(c,de)}}}if(Z)return;if(Q||m.preventDefault(),y&&E.isExpanded(y)&&_.startsWith("delete")){var ze=_.endsWith("Backward")?"backward":"forward";s.deleteFragment(c,{direction:ze});return}switch(_){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{s.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{s.deleteForward(c);break}case"deleteContentBackward":{s.deleteBackward(c);break}case"deleteEntireSoftLine":{s.deleteBackward(c,{unit:"line"}),s.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{s.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{s.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{s.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{s.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{s.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{s.deleteForward(c,{unit:"word"});break}case"insertLineBreak":s.insertSoftBreak(c);break;case"insertParagraph":{s.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{_==="insertFromComposition"&&A.isComposing(c)&&(S(!1),et.set(c,!1)),(K==null?void 0:K.constructor.name)==="DataTransfer"?A.insertData(c,K):typeof K=="string"&&(Q?$.current.push(()=>s.insertText(c,K)):s.insertText(c,K));break}}var qe=(b=wt.get(c))===null||b===void 0?void 0:b.unref();wt.delete(c),qe&&(!c.selection||!E.equals(c.selection,qe))&&F.select(c,qe)}},[l,i]),W=T.useCallback(m=>{m==null?(z.cancel(),Y.cancel(),Ut.delete(c),nt.delete(c),R.current&&Ve&&R.current.removeEventListener("beforeinput",N)):Ve&&m.addEventListener("beforeinput",N),R.current=m},[R,N,z,Y]);St(()=>{var m=A.getWindow(c);return m.document.addEventListener("selectionchange",Y),()=>{m.document.removeEventListener("selectionchange",Y)}},[Y]);var M=u([c,[]]);if(o&&c.children.length===1&&Array.from(x.texts(c)).length===1&&x.string(c)===""&&!O){var ee=s.start(c,[]);M.push({[Dt]:!0,placeholder:o,anchor:ee,focus:ee})}var{marks:G}=c;if(P.hasMarkPlaceholder=!1,c.selection&&E.isCollapsed(c.selection)&&G){var{anchor:re}=c.selection,te=x.leaf(c,re.path),ae=vt(te,Gl);if(!j.equals(te,G,{loose:!0})){P.hasMarkPlaceholder=!0;var oe=Object.fromEntries(Object.keys(ae).map(m=>[m,null]));M.push(lt(lt(lt({[ru]:!0},oe),G),{},{anchor:re,focus:re}))}}T.useEffect(()=>{setTimeout(()=>{var{selection:m}=c;if(m){var{anchor:b}=m,y=x.leaf(c,b.path);if(G&&!j.equals(y,G,{loose:!0})){Te.set(c,G);return}}Te.delete(c)})});var ue=(t=bt.get(c))===null||t===void 0||(r=t.getBoundingClientRect())===null||r===void 0?void 0:r.height;return V.createElement(du.Provider,{value:l},V.createElement(lu.Provider,{value:u},V.createElement(xl,{node:R,receivedUserInput:q},V.createElement(p,Object.assign({role:l?void 0:"textbox","aria-multiline":l?void 0:!0},C,{spellCheck:Ve||!Gt?C.spellCheck:!1,autoCorrect:Ve||!Gt?C.autoCorrect:"false",autoCapitalize:Ve||!Gt?C.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l,zindex:-1,suppressContentEditableWarning:!0,ref:W,style:lt(lt({},B?{}:lt({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},ue?{minHeight:ue}:{})),g),onBeforeInput:T.useCallback(m=>{if(!Ve&&!l&&!me(m,C.onBeforeInput)&&A.hasSelectableTarget(c,m.target)&&(m.preventDefault(),!A.isComposing(c))){var b=m.data;s.insertText(c,b)}},[l]),onInput:T.useCallback(m=>{if(!me(m,C.onInput)){if(w){w.handleInput();return}for(var b of $.current)b();$.current=[]}},[]),onBlur:T.useCallback(m=>{if(!(l||P.isUpdatingSelection||!A.hasSelectableTarget(c,m.target)||me(m,C.onBlur))){var b=A.findDocumentOrShadowRoot(c);if(P.latestElement!==b.activeElement){var{relatedTarget:y}=m,_=A.toDOMNode(c,c);if(y!==_&&!(ye(y)&&y.hasAttribute("data-slate-spacer"))){if(y!=null&&it(y)&&A.hasDOMNode(c,y)){var K=A.toSlateNode(c,y);if(L.isElement(K)&&!c.isVoid(K))return}if(zt){var Z=b.getSelection();Z==null||Z.removeAllRanges()}Qe.delete(c)}}}},[l,C.onBlur]),onClick:T.useCallback(m=>{if(A.hasTarget(c,m.target)&&!me(m,C.onClick)&&it(m.target)){var b=A.toSlateNode(c,m.target),y=A.findPath(c,b);if(!s.hasPath(c,y)||x.get(c,y)!==b)return;if(m.detail===Al&&y.length>=1){var _=y;if(!(L.isElement(b)&&s.isBlock(c,b))){var K,Z=s.above(c,{match:Ce=>L.isElement(Ce)&&s.isBlock(c,Ce),at:y});_=(K=Z==null?void 0:Z[1])!==null&&K!==void 0?K:y.slice(0,1)}var Q=s.range(c,_);F.select(c,Q);return}if(l)return;var ne=s.start(c,y),J=s.end(c,y),le=s.void(c,{at:ne}),ce=s.void(c,{at:J});if(le&&ce&&h.equals(le[1],ce[1])){var Be=s.range(c,ne);F.select(c,Be)}}},[l,C.onClick]),onCompositionEnd:T.useCallback(m=>{if(A.hasSelectableTarget(c,m.target)){if(A.isComposing(c)&&(S(!1),et.set(c,!1)),w==null||w.handleCompositionEnd(m),me(m,C.onCompositionEnd)||Oe)return;if(!zt&&!rl&&!Jo&&!al&&!nl&&m.data){var b=Te.get(c);Te.delete(c),b!==void 0&&(Le.set(c,c.marks),c.marks=b),s.insertText(c,m.data);var y=Le.get(c);Le.delete(c),y!==void 0&&(c.marks=y)}}},[C.onCompositionEnd]),onCompositionUpdate:T.useCallback(m=>{A.hasSelectableTarget(c,m.target)&&!me(m,C.onCompositionUpdate)&&(A.isComposing(c)||(S(!0),et.set(c,!0)))},[C.onCompositionUpdate]),onCompositionStart:T.useCallback(m=>{if(A.hasSelectableTarget(c,m.target)){if(w==null||w.handleCompositionStart(m),me(m,C.onCompositionStart)||Oe)return;S(!0);var{selection:b}=c;if(b){if(E.isExpanded(b)){s.deleteFragment(c);return}var y=s.above(c,{match:Z=>L.isElement(Z)&&s.isInline(c,Z),mode:"highest"});if(y){var[,_]=y;if(s.isEnd(c,b.anchor,_)){var K=s.after(c,_);F.setSelection(c,{anchor:K,focus:K})}}}}},[C.onCompositionStart]),onCopy:T.useCallback(m=>{A.hasSelectableTarget(c,m.target)&&!me(m,C.onCopy)&&(m.preventDefault(),A.setFragmentData(c,m.clipboardData,"copy"))},[C.onCopy]),onCut:T.useCallback(m=>{if(!l&&A.hasSelectableTarget(c,m.target)&&!me(m,C.onCut)){m.preventDefault(),A.setFragmentData(c,m.clipboardData,"cut");var{selection:b}=c;if(b)if(E.isExpanded(b))s.deleteFragment(c);else{var y=x.parent(c,b.anchor.path);s.isVoid(c,y)&&F.delete(c)}}},[l,C.onCut]),onDragOver:T.useCallback(m=>{if(A.hasTarget(c,m.target)&&!me(m,C.onDragOver)){var b=A.toSlateNode(c,m.target);L.isElement(b)&&s.isVoid(c,b)&&m.preventDefault()}},[C.onDragOver]),onDragStart:T.useCallback(m=>{if(!l&&A.hasTarget(c,m.target)&&!me(m,C.onDragStart)){var b=A.toSlateNode(c,m.target),y=A.findPath(c,b),_=L.isElement(b)&&s.isVoid(c,b)||s.void(c,{at:y,voids:!0});if(_){var K=s.range(c,y);F.select(c,K)}P.isDraggingInternally=!0,A.setFragmentData(c,m.dataTransfer,"drag")}},[l,C.onDragStart]),onDrop:T.useCallback(m=>{if(!l&&A.hasTarget(c,m.target)&&!me(m,C.onDrop)){m.preventDefault();var b=c.selection,y=A.findEventRange(c,m),_=m.dataTransfer;F.select(c,y),P.isDraggingInternally&&b&&!E.equals(b,y)&&!s.void(c,{at:y,voids:!0})&&F.delete(c,{at:b}),A.insertData(c,_),A.isFocused(c)||A.focus(c)}P.isDraggingInternally=!1},[l,C.onDrop]),onDragEnd:T.useCallback(m=>{!l&&P.isDraggingInternally&&C.onDragEnd&&A.hasTarget(c,m.target)&&C.onDragEnd(m),P.isDraggingInternally=!1},[l,C.onDragEnd]),onFocus:T.useCallback(m=>{if(!l&&!P.isUpdatingSelection&&A.hasEditableTarget(c,m.target)&&!me(m,C.onFocus)){var b=A.toDOMNode(c,c),y=A.findDocumentOrShadowRoot(c);if(P.latestElement=y.activeElement,rr&&m.target!==b){b.focus();return}Qe.set(c,!0)}},[l,C.onFocus]),onKeyDown:T.useCallback(m=>{if(!l&&A.hasEditableTarget(c,m.target)){w==null||w.handleKeyDown(m);var{nativeEvent:b}=m;if(A.isComposing(c)&&b.isComposing===!1&&(et.set(c,!1),S(!1)),me(m,C.onKeyDown)||A.isComposing(c))return;var{selection:y}=c,_=c.children[y!==null?y.focus.path[0]:0],K=$a(x.string(_))==="rtl";if(fe.isRedo(b)){m.preventDefault();var Z=c;typeof Z.redo=="function"&&Z.redo();return}if(fe.isUndo(b)){m.preventDefault();var Q=c;typeof Q.undo=="function"&&Q.undo();return}if(fe.isMoveLineBackward(b)){m.preventDefault(),F.move(c,{unit:"line",reverse:!0});return}if(fe.isMoveLineForward(b)){m.preventDefault(),F.move(c,{unit:"line"});return}if(fe.isExtendLineBackward(b)){m.preventDefault(),F.move(c,{unit:"line",edge:"focus",reverse:!0});return}if(fe.isExtendLineForward(b)){m.preventDefault(),F.move(c,{unit:"line",edge:"focus"});return}if(fe.isMoveBackward(b)){m.preventDefault(),y&&E.isCollapsed(y)?F.move(c,{reverse:!K}):F.collapse(c,{edge:"start"});return}if(fe.isMoveForward(b)){m.preventDefault(),y&&E.isCollapsed(y)?F.move(c,{reverse:K}):F.collapse(c,{edge:"end"});return}if(fe.isMoveWordBackward(b)){m.preventDefault(),y&&E.isExpanded(y)&&F.collapse(c,{edge:"focus"}),F.move(c,{unit:"word",reverse:!K});return}if(fe.isMoveWordForward(b)){m.preventDefault(),y&&E.isExpanded(y)&&F.collapse(c,{edge:"focus"}),F.move(c,{unit:"word",reverse:K});return}if(Ve){if((iu||zt)&&y&&(fe.isDeleteBackward(b)||fe.isDeleteForward(b))&&E.isCollapsed(y)){var ne=x.parent(c,y.anchor.path);if(L.isElement(ne)&&s.isVoid(c,ne)&&(s.isInline(c,ne)||s.isBlock(c,ne))){m.preventDefault(),s.deleteBackward(c,{unit:"block"});return}}}else{if(fe.isBold(b)||fe.isItalic(b)||fe.isTransposeCharacter(b)){m.preventDefault();return}if(fe.isSoftBreak(b)){m.preventDefault(),s.insertSoftBreak(c);return}if(fe.isSplitBlock(b)){m.preventDefault(),s.insertBreak(c);return}if(fe.isDeleteBackward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"backward"}):s.deleteBackward(c);return}if(fe.isDeleteForward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"forward"}):s.deleteForward(c);return}if(fe.isDeleteLineBackward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"backward"}):s.deleteBackward(c,{unit:"line"});return}if(fe.isDeleteLineForward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"forward"}):s.deleteForward(c,{unit:"line"});return}if(fe.isDeleteWordBackward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"backward"}):s.deleteBackward(c,{unit:"word"});return}if(fe.isDeleteWordForward(b)){m.preventDefault(),y&&E.isExpanded(y)?s.deleteFragment(c,{direction:"forward"}):s.deleteForward(c,{unit:"word"});return}}}},[l,C.onKeyDown]),onPaste:T.useCallback(m=>{!l&&A.hasEditableTarget(c,m.target)&&!me(m,C.onPaste)&&(!Ve||Vo(m.nativeEvent)||zt)&&(m.preventDefault(),A.insertData(c,m.clipboardData))},[l,C.onPaste])}),V.createElement(Yl,{decorations:M,node:c,renderElement:f,renderPlaceholder:D,renderLeaf:d,selection:c.selection})))))},Zl=e=>{var{attributes:t,children:r}=e;return V.createElement("span",Object.assign({},t),r,Oe&&V.createElement("br",null))},Jl=()=>[],Ql=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&E.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),po(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},me=(e,t)=>{if(!t)return!1;var r=t(e);return r??(e.isDefaultPrevented()||e.isPropagationStopped())},ef=(e,t)=>{if(!t)return!1;var r=t(e);return r??e.defaultPrevented},Cu=T.createContext(!1),tf=()=>T.useContext(Cu),rf=T.createContext({});function nf(e){var t=T.useRef([]).current,r=T.useRef({editor:e}).current,n=T.useCallback(u=>{r.editor=u,t.forEach(i=>i(u))},[]),a=T.useMemo(()=>({getSlate:()=>r.editor,addEventListener:u=>(t.push(u),()=>{t.splice(t.indexOf(u),1)})}),[t,r]);return{selectorContext:a,onChange:n}}var af=["editor","children","onChange","value"],uf=e=>{var{editor:t,children:r,onChange:n,value:a}=e,u=vt(e,af),i=T.useRef(!1),[o,l]=V.useState(()=>{if(!x.isNodeList(a))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(he.stringify(a)));if(!s.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(he.stringify(t)));return t.children=a,Object.assign(t,u),{v:0,editor:t}}),{selectorContext:f,onChange:d}=nf(t),D=T.useCallback(()=>{n&&n(t.children),l(p=>({v:p.v+1,editor:t})),d(t)},[n]);T.useEffect(()=>(jr.set(t,D),()=>{jr.set(t,()=>{}),i.current=!0}),[D]);var[v,g]=T.useState(A.isFocused(t));return T.useEffect(()=>{g(A.isFocused(t))}),St(()=>{var p=()=>g(A.isFocused(t));return Zo?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),V.createElement(rf.Provider,{value:f},V.createElement(vu.Provider,{value:o},V.createElement(cn.Provider,{value:o.editor},V.createElement(Cu.Provider,{value:v},r))))},pa=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},ma=(e,t,r)=>{var n=A.toDOMRange(e,t).getBoundingClientRect(),a=A.toDOMRange(e,r).getBoundingClientRect();return pa(n,a)&&pa(a,n)},sf=(e,t)=>{var r=s.range(e,E.end(t)),n=Array.from(s.positions(e,{at:t})),a=0,u=n.length,i=Math.floor(u/2);if(ma(e,s.range(e,n[a]),r))return s.range(e,n[a],r);if(n.length<2)return s.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)ma(e,s.range(e,n[i]),r)?u=i:a=i,i=Math.floor((a+u)/2);return s.range(e,n[u],r)};function Ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ba(Object(r),!0).forEach(function(n){or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var of=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=t,{apply:a,onChange:u,deleteBackward:i,addMark:o,removeMark:l}=n;return lr.set(n,new WeakMap),n.addMark=(f,d)=>{var D,v;(D=on.get(n))===null||D===void 0||D(),!Te.get(n)&&(v=Ee.get(n))!==null&&v!==void 0&&v.length&&Te.set(n,null),Le.delete(n),o(f,d)},n.removeMark=f=>{var d;!Te.get(n)&&(d=Ee.get(n))!==null&&d!==void 0&&d.length&&Te.set(n,null),Le.delete(n),l(f)},n.deleteBackward=f=>{if(f!=="line")return i(f);if(n.selection&&E.isCollapsed(n.selection)){var d=s.above(n,{match:p=>L.isElement(p)&&s.isBlock(n,p),at:n.selection});if(d){var[,D]=d,v=s.range(n,D,n.selection.anchor),g=sf(n,v);E.isCollapsed(g)||F.delete(n,{at:g})}}},n.apply=f=>{var d=[],D=Ee.get(n);if(D!=null&&D.length){var v=D.map(k=>Ml(k,f)).filter(Boolean);Ee.set(n,v)}var g=Ge.get(n);g&&Ge.set(n,Da(n,g,f));var p=Ue.get(n);if(p!=null&&p.at){var B=X.isPoint(p==null?void 0:p.at)?Wr(n,p.at,f):Da(n,p.at,f);Ue.set(n,B?Ea(Ea({},p),{},{at:B}):null)}switch(f.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...Ht(n,f.path));break}case"set_selection":{var C;(C=wt.get(n))===null||C===void 0||C.unref(),wt.delete(n);break}case"insert_node":case"remove_node":{d.push(...Ht(n,h.parent(f.path)));break}case"merge_node":{var c=h.previous(f.path);d.push(...Ht(n,c));break}case"move_node":{var O=h.common(h.parent(f.path),h.parent(f.newPath));d.push(...Ht(n,O));break}}a(f);for(var[S,R]of d){var[$]=s.node(n,S);Mr.set($,R)}},n.setFragmentData=f=>{var{selection:d}=n;if(d){var[D,v]=E.edges(d),g=s.void(n,{at:D.path}),p=s.void(n,{at:v.path});if(!(E.isCollapsed(d)&&!g)){var B=A.toDOMRange(n,d),C=B.cloneContents(),c=C.childNodes[0];if(C.childNodes.forEach(z=>{z.textContent&&z.textContent.trim()!==""&&(c=z)}),p){var[O]=p,S=B.cloneRange(),R=A.toDOMNode(n,O);S.setEndAfter(R),C=S.cloneContents()}if(g&&(c=C.querySelector("[data-slate-spacer]")),Array.from(C.querySelectorAll("[data-slate-zero-width]")).forEach(z=>{var Y=z.getAttribute("data-slate-zero-width")==="n";z.textContent=Y?`
`:""}),nu(c)){var $=c.ownerDocument.createElement("span");$.style.whiteSpace="pre",$.appendChild(c),C.appendChild($),c=$}var k=n.getFragment(),q=JSON.stringify(k),H=window.btoa(encodeURIComponent(q));c.setAttribute("data-slate-fragment",H),f.setData("application/".concat(r),H);var P=C.ownerDocument.createElement("div");return P.appendChild(C),P.setAttribute("hidden","true"),C.ownerDocument.body.appendChild(P),f.setData("text/html",P.innerHTML),f.setData("text/plain",uu(P)),C.ownerDocument.body.removeChild(P),f}}},n.insertData=f=>{n.insertFragmentData(f)||n.insertTextData(f)},n.insertFragmentData=f=>{var d=f.getData("application/".concat(r))||Xo(f);if(d){var D=decodeURIComponent(window.atob(d)),v=JSON.parse(D);return n.insertFragment(v),!0}return!1},n.insertTextData=f=>{var d=f.getData("text/plain");if(d){var D=d.split(/\r\n|\r|\n/),v=!1;for(var g of D)v&&F.splitNodes(n,{always:!0}),n.insertText(g),v=!0;return!0}return!1},n.onChange=f=>{ya.unstable_batchedUpdates(()=>{var d=jr.get(n);d&&d(),u(f)})},n},Ht=(e,t)=>{var r=[];for(var[n,a]of s.levels(e,{at:t})){var u=A.findKey(e,n);r.push([a,u])}return r},lf={isHistory(e){return De(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Ye.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Ye.isOperationList(e.undos[0].operations))}},br=new WeakMap,wr=new WeakMap,ct={isHistoryEditor(e){return lf.isHistory(e.history)&&s.isEditor(e)},isMerging(e){return wr.get(e)},isSaving(e){return br.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=ct.isMerging(e);wr.set(e,!1),t(),wr.set(e,r)},withoutSaving(e,t){var r=ct.isSaving(e);br.set(e,!1),t(),br.set(e,r)}},ff=e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:n}=t,{redos:a}=n;if(a.length>0){var u=a[a.length-1];u.selectionBefore&&F.setSelection(t,u.selectionBefore),ct.withoutSaving(t,()=>{s.withoutNormalizing(t,()=>{for(var i of u.operations)t.apply(i)})}),n.redos.pop(),t.writeHistory("undos",u)}},t.undo=()=>{var{history:n}=t,{undos:a}=n;if(a.length>0){var u=a[a.length-1];ct.withoutSaving(t,()=>{s.withoutNormalizing(t,()=>{var i=u.operations.map(Ye.inverse).reverse();for(var o of i)t.apply(o);u.selectionBefore&&F.setSelection(t,u.selectionBefore)})}),t.writeHistory("redos",u),n.undos.pop()}},t.apply=n=>{var{operations:a,history:u}=t,{undos:i}=u,o=i[i.length-1],l=o&&o.operations[o.operations.length-1],f=ct.isSaving(t),d=ct.isMerging(t);if(f==null&&(f=df(n)),f){if(d==null&&(o==null?d=!1:a.length!==0?d=!0:d=cf(n,l)),o&&d)o.operations.push(n);else{var D={operations:[n],selectionBefore:t.selection};t.writeHistory("undos",D)}for(;i.length>100;)i.shift();u.redos=[]}r(n)},t.writeHistory=(n,a)=>{t.history[n].push(a)},t},cf=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&h.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&h.equals(e.path,t.path)),df=(e,t)=>e.type!=="set_selection";const Aa={A:e=>({type:"link",url:e.getAttribute("href")}),BLOCKQUOTE:()=>({type:"quote"}),H1:()=>({type:"heading-one"}),H2:()=>({type:"heading-two"}),H3:()=>({type:"heading-three"}),H4:()=>({type:"heading-four"}),H5:()=>({type:"heading-five"}),H6:()=>({type:"heading-six"}),IMG:e=>({type:"image",url:e.getAttribute("src")}),LI:()=>({type:"list-item"}),OL:()=>({type:"numbered-list"}),P:()=>({type:"paragraph"}),PRE:()=>({type:"pre"}),UL:()=>({type:"bulleted-list"})},Fa={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underline:!0}),H:()=>({mark:!0})},vf=["ArrowRight","ArrowDown"],_r=["ArrowLeft","ArrowUp"],Df=[...vf,..._r],pu=e=>{if(e.nodeType===3)return e.textContent;if(e.nodeType!==1)return null;if(e.nodeName==="BR")return`
`;const{nodeName:t}=e;let r=e;t==="PRE"&&e.childNodes[0]&&e.childNodes[0].nodeName==="CODE"&&(r=e.childNodes[0]);let n=Array.from(r.childNodes).map(pu).flat();if(n.length===0&&(n=[{text:""}]),e.nodeName==="BODY")return pr("fragment",{},n);if(Aa[t]){const a=Aa[t](e);return pr("element",a,n)}if(Fa[t]){const a=Fa[t](e);return n.map(u=>pr("text",a,u))}return n},hf=e=>{const{insertData:t,isInline:r,isVoid:n}=e;return e.isInline=a=>a.type==="link"?!0:r(a),e.isVoid=a=>a.type==="image"?!0:n(a),e.insertData=a=>{const u=a.getData("text/html");if(u){const i=new DOMParser().parseFromString(u,"text/html"),o=pu(i.body);F.insertFragment(e,o);return}t(a)},e},gt=T.forwardRef((e,t)=>{const{className:r,active:n,...a}=e;return I("span",{...a,ref:t,className:`material-icons editor-button${n?" active":""}`})}),gf=T.forwardRef((e,t)=>{const{className:r,...n}=e;return I("div",{...n,ref:t,className:"editor-toolbar"})}),ba={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code","mod+m":"mark"},$r=["numbered-list","bulleted-list"],Yt=["left","center","right","justify"],Cf=async e=>{const t=new FormData;return t.append("image",e),await Oa.post("/markdownx/upload/",t,{headers:{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"}}).then(r=>r.data.image_code.slice(4,-1))},pf=e=>{const{insertData:t,isVoid:r}=e;return e.isVoid=n=>n.type==="image"?!0:r(n),e.insertData=n=>{const a=n.getData("text/plain"),{files:u}=n;if(u&&u.length>0)for(const i of u){const o=new FileReader,[l]=i.type.split("/");l==="image"&&(o.addEventListener("load",()=>{Cf(i).then(f=>{zr(e,f)})}),o.readAsDataURL(i))}else mu(a)?zr(e,a):t(n)},e},mf=e=>{const{insertData:t,insertText:r,isInline:n,isElementReadOnly:a,isSelectable:u}=e;return e.isInline=i=>["link","button","badge"].includes(i.type)||n(i),e.isElementReadOnly=i=>i.type==="badge"||a(i),e.isSelectable=i=>i.type!=="badge"&&u(i),e.insertText=i=>{i&&yr(i)?qr(e,i):r(i)},e.insertData=i=>{const o=i.getData("text/plain");o&&yr(o)?qr(e,o):t(i)},e},zr=(e,t)=>{const r={text:""},n={type:"image",url:t,children:[r]};F.insertNodes(e,n),F.insertNodes(e,{type:"paragraph",children:[r]})},Bf=({attributes:e,children:t,element:r})=>{const n=je(),a=A.findPath(n,r),u=Bl();return tf(),Ae("div",{...e,onClick:()=>{F.select(n,a)},children:[Ae("div",{contentEditable:!1,style:{display:"flex",justifyContent:"center",lineHeight:0},children:[I("img",{src:r.url,style:{boxShadow:`${u?"0 0 0 2px #8671B5aa":"none"}`}}),I(gt,{onClick:()=>F.removeNodes(n,{at:a}),children:I("span",{children:"delete"})})]}),t]})},Ef=()=>{const e=je(),[t,r]=V.useState(""),[n,a]=V.useState(!1);return Ae("div",{className:"image",children:[I(gt,{onMouseDown:l=>{l.preventDefault(),a(!0)},children:I("span",{children:"image"})}),n&&Ae("modal",{className:"image-opened",children:[I("input",{type:"text",value:t,placeholder:"...",onChange:l=>{let f=l.target.value;r(f)}}),Ae("div",{children:[I("button",{type:"button",onMouseDown:l=>{l.preventDefault(),a(!1)},children:""}),I("button",{type:"button",onMouseDown:l=>{if(l.preventDefault(),t&&!mu(t)){alert("");return}t&&zr(e,t),r(""),a(!1)},children:""})]})]})]})},mu=e=>{if(!e||!yr(e))return!1;const t=new URL(e).pathname.split(".").pop();return Ku.includes(t)},Bu=(e,t)=>{const r=Au(e,t,Yt.includes(t)?"align":"type"),n=$r.includes(t);F.unwrapNodes(e,{match:u=>!s.isEditor(u)&&L.isElement(u)&&$r.includes(u.type)&&!Yt.includes(t),split:!0});let a;if(Yt.includes(t)?a={align:r?void 0:t}:a={type:r?"paragraph":n?"list-item":t},F.setNodes(e,a),!r&&n){const u={type:t,children:[]};F.wrapNodes(e,u)}},Eu=(e,t)=>{Fu(e,t)?s.removeMark(e,t):s.addMark(e,t,!0)},Au=(e,t,r="type")=>{const[n]=s.nodes(e,{match:a=>!s.isEditor(a)&&L.isElement(a)&&a[r]===t});return!!n},Fu=(e,t)=>{const r=s.marks(e);return r?r[t]===!0:!1},Ke=({format:e,icon:t})=>{const r=Pt();return I(gt,{active:Au(r,e,Yt.includes(e)?"align":"type"),onMouseDown:n=>{n.preventDefault(),Bu(r,e)},children:I("span",{children:t})})},Bt=({format:e,icon:t})=>{const r=Pt();return I(gt,{active:Fu(r,e),onMouseDown:n=>{n.preventDefault(),Eu(r,e)},children:I("span",{children:t})})},nr=e=>{const[t]=s.nodes(e,{match:r=>r.type==="link"});return!!t},bu=e=>{F.unwrapNodes(e,{match:t=>!s.isEditor(t)&&L.isElement(t)&&t.type==="link"})},qr=(e,t)=>{nr(e)&&bu(e);const{selection:r}=e,n=r&&E.isCollapsed(r),a={type:"link",url:t,children:n?[{text:t}]:[]};n?F.insertNodes(e,a):(F.wrapNodes(e,a,{split:!0}),F.collapse(e,{edge:"end"}))},Af=({format:e,icon:t})=>{const r=Pt(),[n,a]=V.useState(""),[u,i]=V.useState(!1),o=d=>{let D=d.target.value;D&&a(D)},l=d=>{d.preventDefault(),qr(r,n),i(!1)},f=d=>{d.preventDefault(),i(!1)};return Ae("div",{className:"link",children:[I(gt,{active:nr(r),onMouseDown:d=>{d.preventDefault(),i(!0)},children:I("span",{children:t})}),u&&Ae("modal",{className:"link-opened",children:[I("input",{type:"text",value:n,placeholder:"...",onChange:o}),Ae("div",{children:[I("button",{type:"button",onMouseDown:f,children:""}),I("button",{type:"button",onMouseDown:l,children:""})]})]})]})},wa=()=>Ae("span",{contentEditable:!1,style:{fontSize:0},children:["$",String.fromCodePoint(160)]}),Ff=V.forwardRef(({attributes:e,children:t,element:r,style:n},a)=>Ae("a",{target:"_blank",...e,href:r.url,ref:a,style:{display:"inline"},children:[I(wa,{}),t,I(wa,{})]})),bf=()=>{const e=Pt();return I(gt,{active:nr(e),onMouseDown:()=>{nr(e)&&bu(e)},children:I("span",{children:"link_off"})})},Hr=e=>{var n;if(Array.isArray(e))return e.map(a=>Hr(a)).join("");if(j.isText(e)){let a=vr(e.text);return e.code&&(a=`<code>${a}</code>`),e.bold&&(a=`<strong>${a}</strong>`),e.mark&&(a=`<mark>${a}</mark>`),e.strikethrough&&(a=`<del>${a}</del>`),e.italic&&(a=`<em>${a}</em>`),e.underline&&(a=`<u>${a}</u>`),a}const t=((n=e.children)==null?void 0:n.map(a=>Hr(a)).join(""))||" ",r=e.align?` style="text-align: ${e.align}"`:"";switch(e.type){case"quote":return`<blockquote>${t}</blockquote>`;case"link":return`<a target='_blank' href="${vr(e.url)}">${t}</a>`;case"heading-one":return`<h1${r}>${t}</h1>`;case"pre":return`<pre>${t}</pre>`;case"heading-two":return`<h2${r}>${t}</h2>`;case"heading-three":return`<h3${r}>${t}</h3>`;case"bulleted-list":return`<ul>${t}</ul>`;case"list-item":return`<li>${t}</li>`;case"numbered-list":return`<ol>${t}</ol>`;case"image":return`<img src="${vr(e.url)}" />`;case"paragraph":default:return t?`<p${r}>${t}</p>`:""}},wf=({attributes:e,children:t,element:r})=>{const n={textAlign:r.align};switch(r.type){case"quote":return I("blockquote",{style:n,...e,children:t});case"bulleted-list":return I("ul",{style:n,...e,children:t});case"heading-one":return I("h1",{style:n,...e,children:t});case"heading-two":return I("h2",{style:n,...e,children:t});case"heading-three":return I("h3",{style:n,...e,children:t});case"list-item":return I("li",{style:n,...e,children:t});case"numbered-list":return I("ol",{style:n,...e,children:t});case"pre":return I("pre",{style:n,...e,children:t});case"link":return I(Ff,{style:n,...e,element:r,children:t});case"image":return I(Bf,{style:n,...e,element:r,children:t});case"paragraph":default:return I("p",{style:n,...e,children:t})}},yf=({attributes:e,children:t,leaf:r})=>(r.bold&&(t=I("strong",{children:t})),r.mark&&(t=I("mark",{children:t})),r.strikethrough&&(t=I("del",{children:t})),r.underline&&(t=I("u",{children:t})),r.code&&(t=I("code",{children:t})),r.italic&&(t=I("em",{children:t})),I("span",{...e,children:t})),Of=e=>{const[t,r]=T.useState(e.title),[n,a]=T.useState({sending:!1,share_to_mastodon:!0}),u=T.useMemo(()=>e.initValue||JSON.parse(localStorage.getItem("content"))||[{type:"paragraph",children:[{text:""}]}],[]),i=T.useCallback(D=>I(wf,{...D}),[]),o=T.useCallback(D=>I(yf,{...D}),[]),l=T.useMemo(()=>hf(pf(mf(ff(of(Ma()))))),[]),f=async()=>{if(!t){alert("");return}const D=Hr(l.children);await Oa.post(e.api,{content:D,title:t,share_to_mastodon:n.share_to_mastodon},{"content-type":"application/json"}).then(v=>{v.status==200&&v.data&&v.data.r===0?(window.location.href=v.data.data.redirect_uri,localStorage.removeItem("content")):alert(v.data.msg)})},d=()=>{a({...n,share_to_mastodon:!n.share_to_mastodon})};return I("div",{className:"editor",children:Ae(uf,{editor:l,value:u,onChange:D=>{if(l.operations.some(g=>g.type!=="set_selection")){const g=JSON.stringify(D);localStorage.setItem("content",g)}},children:[Ae("div",{className:"editor-header",children:[Ae("div",{className:"editor-action",children:[I("input",{type:"text",value:t,placeholder:"",onChange:D=>r(D.target.value)}),I("div",{className:`share-to-mastodon${n.share_to_mastodon?" yes":""}`,onClick:d,children:I(Ru,{})}),I("div",{className:"submit",onClick:f,disabled:n.sending,children:I(Mu,{})})]}),Ae(gf,{children:[I(Ke,{format:"heading-one",icon:"looks_one"}),I(Ke,{format:"heading-two",icon:"looks_two"}),I(Ke,{format:"heading-three",icon:"looks_3"}),I(Bt,{format:"bold",icon:"format_bold"}),I(Bt,{format:"italic",icon:"format_italic"}),I(Bt,{format:"underline",icon:"format_underlined"}),I(Bt,{format:"mark",icon:"format_color_text"}),I(Bt,{format:"strikethrough",icon:"format_strikethrough"}),I(Ke,{format:"pre",icon:"code"}),I(Af,{format:"link",icon:"link"}),I(bf,{format:"link",icon:"link_off"}),I(Ef,{format:"image",icon:"image"}),I(Ke,{format:"quote",icon:"format_quote"}),I(Ke,{format:"numbered-list",icon:"format_list_numbered"}),I(Ke,{format:"bulleted-list",icon:"format_list_bulleted"}),I(Ke,{format:"center",icon:"format_align_center"})]})]}),I(Xl,{renderElement:i,renderLeaf:o,placeholder:"",spellCheck:!0,autoFocus:!0,className:"editor-content",selection:l.selection,onKeyDown:D=>{const v=D.key;if(v==="`"&&D.ctrlKey){D.preventDefault();const g=s.marks(l).code;s.addMark(l,"code",!g);return}else if(v===" "&&D.ctrlKey){D.preventDefault(),F.insertNodes(l,{text:" ",marks:[]});return}else if(v==="Enter"&&D.shiftKey){D.preventDefault();const g={type:"paragraph",children:[{text:"",marks:[]}]};F.insertNodes(l,g);return}else if(v==="Enter"){const{selection:g}=l,[p]=s.nodes(l,{match:B=>$r.includes(B.type),at:s.before(l,g.focus,{unit:"block"})});if(p){const B=p[0].children[p[0].children.length-1];if(B.children.length===1&&B.children[0].text===""){D.preventDefault(),Bu(l,p.type);return}}}else if(Df.includes(v)){const{selection:g}=l,[p]=s.nodes(l,{match:B=>B.type==="image",at:s[`${_r.includes(v)?"before":"after"}`](l,g.focus,{unit:"block"})});if(p){D.preventDefault(),F.move(l,{reverse:_r.includes(v),distance:2,unit:"character"});return}}else if(D.key==="Backspace"){const{selection:g}=l,[p]=s.nodes(l,{match:C=>C.type==="image",at:s.before(l,g.focus,{unit:"block"})}),[B]=s.nodes(l,{match:C=>C.type!=="image",at:g.focus});if(p&&B){D.preventDefault(),F.move(l,{reverse:!0,distance:1,unit:"character"});return}}for(const g in ba)if(qu(g,D)){D.preventDefault();const p=ba[g];Eu(l,p)}}})]})})};ya.render(I(Of,{api:window.CONFIG.api}),document.getElementById("editor-wrapper"));
